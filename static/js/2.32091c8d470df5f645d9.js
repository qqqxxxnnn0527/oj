webpackJsonp([2],{"0v5k":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Xxa5"),i=n.n(r),o=n("exGp"),s=n.n(o),a=n("8Q2T"),l=n("FN8c"),c=n("oAV5"),u=n("9ooR"),h=n("q+gC"),d=(n("3LIO"),n("7+uW")),f=Object(d.ref)(null),p={name:"submissionRrweb",components:{Highlight:u.a},data:function(){var t=this;return{playbackDialogVisible:!1,columns:[{title:this.$i18n.t("m.ID"),align:"center",type:"index"},{title:this.$i18n.t("m.Status"),align:"center",render:function(e,n){return e("Tag",{props:{color:l.e[n.row.result].color}},t.$i18n.t("m."+l.e[n.row.result].name.replace(/ /g,"_")))}},{title:this.$i18n.t("m.Memory"),align:"center",render:function(t,e){return t("span",c.a.submissionMemoryFormat(e.row.memory))}},{title:this.$i18n.t("m.Time"),align:"center",render:function(t,e){return t("span",c.a.submissionTimeFormat(e.row.cpu_time))}}],submission:{result:"0",code:"",info:{data:[]},statistic_info:{time_cost:"",memory_cost:""}},isConcat:!1,loading:!1}},mounted:function(){this.getSubmission()},methods:{getSubmission:function(){var t=this;return s()(i.a.mark(function e(){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,fetch("http://127.0.0.1:1880/oj/rrweb/"+t.$route.params.id);case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,f.value=new h.a({target:document.getElementById("rrwebplayer"),props:{events:r.events,speedOption:[1,2,5,10]}});case 8:case"end":return e.stop()}},e,t)}))()},shareSubmission:function(t){var e=this,n={id:this.submission.id,shared:t};a.a.updateSubmission(n).then(function(t){e.getSubmission(),e.$success(e.$i18n.t("m.Succeeded"))},function(){})},getRrwebPlayback:function(){var t=this;return s()(i.a.mark(function e(){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://127.0.0.1:1880/oj/rrweb/"+t.submission.id);case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,f.value=new h.a({target:document.getElementById("rrwebplayer"),props:{events:r.events,speedOption:[1,2,5,10]}}),t.playbackDialogVisible=!0;case 8:case"end":return e.stop()}},e,t)}))()}},computed:{status:function(){return{type:l.e[this.submission.result].type,statusName:l.e[this.submission.result].name,color:l.e[this.submission.result].color}},isCE:function(){return-2===this.submission.result},isAdminRole:function(){return this.$store.getters.isAdminRole}}},g={render:function(){var t=this.$createElement,e=this._self._c||t;return e("Row",{attrs:{type:"flex",justify:"space-around"}},[e("div",{attrs:{id:"rrwebplayer"}})])},staticRenderFns:[]};var m=n("VU/8")(p,g,!1,function(t){n("fFZ5")},"data-v-384a8533",null);e.default=m.exports},"1H6C":function(t,e,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n("HhN8"),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},"3LIO":function(t,e){},"6A5e":function(t,e){},"9ooR":function(t,e,n){"use strict";var r={name:"highlight",data:function(){return{styleObject:{"border-left":"2px solid green"}}},props:{language:{type:String},code:{required:!0,type:String},borderColor:{type:String,default:"green"}},watch:{borderColor:function(t,e){this.styleObject["border-left"]="2.5px solid "+t}}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("pre",{directives:[{name:"highlight",rawName:"v-highlight",value:this.code,expression:"code"}]},[e("code",{class:this.language,style:this.styleObject})])},staticRenderFns:[]};var o=n("VU/8")(r,i,!1,function(t){n("dJ2g")},"data-v-42d1f142",null);e.a=o.exports},EKta:function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),s=r[0],a=r[1],l=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),u=0,h=a>0?s-4:s;for(n=0;n<h;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=255&e;2===a&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,l[u++]=255&e);1===a&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,l[u++]=e>>8&255,l[u++]=255&e);return l},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(h(t,s,s+16383>a?a:s+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function u(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function h(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(u(r));return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},EuP9:function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n("EKta"),i=n("ujcs"),o=n("Ht8P");function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=d(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=a(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(l.isBuffer(e)){var n=0|f(e.length);return 0===(t=a(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?a(t,0):d(t,e);if("Buffer"===e.type&&o(e.data))return d(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(u(e),t=a(t,e<0?0:0|f(e)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function d(t,e){var n=e.length<0?0:0|f(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function f(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function p(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return P(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(t).length;default:if(r)return P(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=l.from(e,r)),l.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,i){var o,s=1,a=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var u=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){for(var h=!0,d=0;d<l;d++)if(c(t,o+d)!==c(e,d)){h=!1;break}if(h)return o}return-1}function v(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function C(t,e,n,r){return G(P(e,t.length-n),t,n,r)}function b(t,e,n,r){return G(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function I(t,e,n,r){return b(t,e,n,r)}function w(t,e,n,r){return G(V(e),t,n,r)}function A(t,e,n,r){return G(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function E(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function S(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,l,c=t[i],u=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(o=t[i+1]))&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(l=(15&c)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,h=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=h}return function(t){var e=t.length;if(e<=N)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=N));return n}(r)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,n){return c(null,t,e,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,n){return function(t,e,n,r){return u(e),e<=0?a(t,e):void 0!==n?"string"==typeof r?a(t,e).fill(n,r):a(t,e).fill(n):a(t,e)}(null,t,e,n)},l.allocUnsafe=function(t){return h(null,t)},l.allocUnsafeSlow=function(t){return h(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=l.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return D(this,e,n);case"utf8":case"utf-8":return S(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return R(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,n,r,i){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,s=n-e,a=Math.min(o,s),c=this.slice(r,i),u=t.slice(e,n),h=0;h<a;++h)if(c[h]!==u[h]){o=c[h],s=u[h];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},l.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return C(this,t,e,n);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return I(this,t,e,n);case"base64":return w(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var N=4096;function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function R(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function D(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=$(t[o]);return i}function x(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function M(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function _(t,e,n,r,i,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function k(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function F(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function O(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(t,e,n,r,o){return o||O(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function L(t,e,n,r,o){return o||O(t,0,n,8),i.write(t,e,n,r,52,8),n+8}l.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=l.prototype;else{var i=e-t;n=new l(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},l.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},l.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},l.prototype.readUInt8=function(t,e){return e||M(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||M(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||M(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},l.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return e||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||M(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){e||M(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||M(t,4,this.length),i.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||M(t,4,this.length),i.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||M(t,8,this.length),i.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||M(t,8,this.length),i.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||_(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},l.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||_(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},l.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):k(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):F(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);_(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},l.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);_(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):k(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):F(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,n){return B(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return B(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return L(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return L(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},l.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=l.isBuffer(t)?t:P(new l(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function $(t){return t<16?"0"+t.toString(16):t.toString(16)}function P(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function G(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(e,n("DuR2"))},G3TW:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Xxa5"),i=n.n(r),o=n("exGp"),s=n.n(o),a=n("8Q2T"),l=n("FN8c"),c=n("oAV5"),u=n("9ooR"),h=n("q+gC"),d=(n("3LIO"),n("7+uW")),f=Object(d.ref)(null),p={name:"submissionDetails",components:{Highlight:u.a},data:function(){var t=this;return{playbackDialogVisible:!1,columns:[{title:this.$i18n.t("m.ID"),align:"center",type:"index"},{title:this.$i18n.t("m.Status"),align:"center",render:function(e,n){return e("Tag",{props:{color:l.e[n.row.result].color}},t.$i18n.t("m."+l.e[n.row.result].name.replace(/ /g,"_")))}},{title:this.$i18n.t("m.Memory"),align:"center",render:function(t,e){return t("span",c.a.submissionMemoryFormat(e.row.memory))}},{title:this.$i18n.t("m.Time"),align:"center",render:function(t,e){return t("span",c.a.submissionTimeFormat(e.row.cpu_time))}}],submission:{result:"0",code:"",info:{data:[]},statistic_info:{time_cost:"",memory_cost:""}},isConcat:!1,loading:!1}},mounted:function(){this.getSubmission()},methods:{handleRoute:function(t){this.$router.push(t)},getSubmission:function(){var t=this;this.loading=!0,a.a.getSubmission(this.$route.params.id).then(function(e){t.loading=!1;var n=e.data.data;if(n.info&&n.info.data&&!t.isConcat){if(void 0!==n.info.data[0].score){t.isConcat=!0;var r={title:t.$i18n.t("m.Score"),align:"center",key:"score"};t.columns.push(r),t.loadingTable=!1}if(t.isAdminRole){t.isConcat=!0;var i=[{title:t.$i18n.t("m.Real_Time"),align:"center",render:function(t,e){return t("span",c.a.submissionTimeFormat(e.row.real_time))}},{title:t.$i18n.t("m.Signal"),align:"center",key:"signal"}];t.columns=t.columns.concat(i)}}t.submission=n},function(){t.loading=!1})},shareSubmission:function(t){var e=this,n={id:this.submission.id,shared:t};a.a.updateSubmission(n).then(function(t){e.getSubmission(),e.$success(e.$i18n.t("m.Succeeded"))},function(){})},getRrwebPlayback:function(){var t=this;return s()(i.a.mark(function e(){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://127.0.0.1:1880/oj/rrweb/"+t.submission.id);case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,f.value=new h.a({target:document.getElementById("rrwebplayer"),props:{events:r.events,speedOption:[1,2,5,10]}}),t.playbackDialogVisible=!0;case 8:case"end":return e.stop()}},e,t)}))()}},computed:{status:function(){return{type:l.e[this.submission.result].type,statusName:l.e[this.submission.result].name,color:l.e[this.submission.result].color}},isCE:function(){return-2===this.submission.result},isAdminRole:function(){return this.$store.getters.isAdminRole}}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",{attrs:{type:"flex",justify:"space-around"}},[n("Col",{attrs:{span:20,id:"status"}},[n("Alert",{attrs:{type:t.status.type,showIcon:""}},[n("span",{staticClass:"title"},[t._v(t._s(t.$t("m."+t.status.statusName.replace(/ /g,"_"))))]),t._v(" "),n("div",{staticClass:"content",attrs:{slot:"desc"},slot:"desc"},[t.isCE?[n("pre",[t._v(t._s(t.submission.statistic_info.err_info))])]:[n("span",[t._v(t._s(t.$t("m.Time"))+": "+t._s(t._f("submissionTime")(t.submission.statistic_info.time_cost)))]),t._v(" "),n("span",[t._v(t._s(t.$t("m.Memory"))+": "+t._s(t._f("submissionMemory")(t.submission.statistic_info.memory_cost)))]),t._v(" "),n("span",[t._v(t._s(t.$t("m.Lang"))+": "+t._s(t.submission.language))]),t._v(" "),n("span",[t._v(t._s(t.$t("m.Author"))+": "+t._s(t.submission.username))])]],2)])],1),t._v(" "),t.submission.info&&!t.isCE?n("Col",{attrs:{span:20}},[n("Table",{attrs:{stripe:"",loading:t.loading,"disabled-hover":!0,columns:t.columns,data:t.submission.info.data}})],1):t._e(),t._v(" "),n("Col",{attrs:{span:20}},[n("Highlight",{attrs:{code:t.submission.code,language:t.submission.language,"border-color":t.status.color}})],1),t._v(" "),t.submission.can_unshare?n("Col",{attrs:{span:20}},[n("div",{attrs:{id:"share-btn"}},[t.submission.shared?n("Button",{attrs:{type:"warning",size:"large"},on:{click:function(e){return t.shareSubmission(!1)}}},[t._v("\n          "+t._s(t.$t("m.UnShare"))+"\n        ")]):n("Button",{attrs:{type:"primary",size:"large"},on:{click:function(e){return t.shareSubmission(!0)}}},[t._v("\n          "+t._s(t.$t("m.Share"))+"\n        ")])],1),t._v(" "),n("div",{attrs:{id:"callback-btn"}},[n("Button",{attrs:{type:"primary",size:"large"},nativeOn:{click:function(e){return t.handleRoute("/rrweb/"+t.submission.id)}}},[t._v("\n          "+t._s(t.$t("m.Playback"))+"\n        ")])],1)]):t._e()],1)],1)},staticRenderFns:[]};var m=n("VU/8")(p,g,!1,function(t){n("zCmR")},"data-v-24f2b001",null);e.default=m.exports},HhN8:function(t,e){!function(e){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag",c="object"==typeof t,u=e.regeneratorRuntime;if(u)c&&(t.exports=u);else{(u=e.regeneratorRuntime=c?t.exports:{}).wrap=b;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",g={},m={};m[s]=function(){return this};var y=Object.getPrototypeOf,v=y&&y(y(M([])));v&&v!==r&&i.call(v,s)&&(m=v);var C=E.prototype=w.prototype=Object.create(m);A.prototype=C.constructor=E,E.constructor=A,E[l]=A.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===A||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,l in t||(t[l]="GeneratorFunction")),t.prototype=Object.create(C),t},u.awrap=function(t){return{__await:t}},S(N.prototype),N.prototype[a]=function(){return this},u.AsyncIterator=N,u.async=function(t,e,n,r){var i=new N(b(t,e,n,r));return u.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},S(C),C[l]="Generator",C[s]=function(){return this},C.toString=function(){return"[object Generator]"},u.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},u.values=M,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(D),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return a.type="throw",a.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var l=i.call(s,"catchLoc"),c=i.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),D(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;D(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:M(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),g}}}function b(t,e,n,r){var i=e&&e.prototype instanceof w?e:w,o=Object.create(i.prototype),s=new x(r||[]);return o._invoke=function(t,e,n){var r=h;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return _()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=T(s,n);if(a){if(a===g)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var l=I(t,e,n);if("normal"===l.type){if(r=n.done?p:d,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=p,n.method="throw",n.arg=l.arg)}}}(t,n,s),o}function I(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function w(){}function A(){}function E(){}function S(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function N(t){var e;this._invoke=function(n,r){function o(){return new Promise(function(e,o){!function e(n,r,o,s){var a=I(t[n],t,r);if("throw"!==a.type){var l=a.arg,c=l.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,o,s)},function(t){e("throw",t,o,s)}):Promise.resolve(c).then(function(t){l.value=t,o(l)},s)}s(a.arg)}(n,r,e,o)})}return e=e?e.then(o,o):o()}}function T(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,T(t,e),"throw"===e.method))return g;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=I(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,g;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,g):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function R(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(R,this),this.reset(!0)}function M(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:_}}function _(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},Ht8P:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},Xxa5:function(t,e,n){t.exports=n("1H6C")},dJ2g:function(t,e){},exGp:function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n("//Fk"));e.default=function(t){return function(){var e=t.apply(this,arguments);return new r.default(function(t,n){return function i(o,s){try{var a=e[o](s),l=a.value}catch(t){return void n(t)}if(!a.done)return r.default.resolve(l).then(function(t){i("next",t)},function(t){i("throw",t)});t(l)}("next")})}}},f1Eh:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},fFZ5:function(t,e){},"q+gC":function(t,e,n){"use strict";(function(t,r,i){function o(){}function s(t,e){for(const n in e)t[n]=e[n];return t}function a(t){return t()}function l(){return Object.create(null)}function c(t){t.forEach(a)}function u(t){return"function"==typeof t}function h(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function d(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function f(t,e){t.appendChild(e)}function p(t,e,n){t.insertBefore(e,n||null)}function g(t){t.parentNode.removeChild(t)}function m(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function y(t){return document.createElement(t)}function v(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function C(t){return document.createTextNode(t)}function b(){return C(" ")}function I(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function w(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function A(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function E(t,e,n,r){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function S(t,e,n){t.classList[n?"add":"remove"](e)}let N;function T(t){N=t}function R(){if(!N)throw new Error("Function called outside component initialization");return N}function D(t){R().$$.on_mount.push(t)}function x(t){R().$$.on_destroy.push(t)}n.d(e,"a",function(){return Un});const M=[],_=[],k=[],F=[],O=Promise.resolve();let B=!1;function L(t){k.push(t)}const U=new Set;let $=0;function P(){const t=N;do{for(;$<M.length;){const t=M[$];$++,T(t),V(t.$$)}for(T(null),M.length=0,$=0;_.length;)_.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];U.has(e)||(U.add(e),e())}k.length=0}while(M.length);for(;F.length;)F.pop()();B=!1,U.clear(),T(t)}function V(t){if(null!==t.fragment){t.update(),c(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(L)}}const G=new Set;let Y;function W(){Y={r:0,c:[],p:Y}}function Z(){Y.r||c(Y.c),Y=Y.p}function j(t,e){t&&t.i&&(G.delete(t),t.i(e))}function K(t,e,n,r){if(t&&t.o){if(G.has(t))return;G.add(t),Y.c.push(()=>{G.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function z(t){t&&t.c()}function Q(t,e,n,r){const{fragment:i,on_mount:o,on_destroy:s,after_update:l}=t.$$;i&&i.m(e,n),r||L(()=>{const e=o.map(a).filter(u);s?s.push(...e):c(e),t.$$.on_mount=[]}),l.forEach(L)}function J(t,e){const n=t.$$;null!==n.fragment&&(c(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function H(t,e,n,r,i,s,a,u=[-1]){const h=N;T(t);const d=t.$$={fragment:null,ctx:null,props:s,update:o,not_equal:i,bound:l(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(h?h.$$.context:[])),callbacks:l(),dirty:u,skip_bound:!1,root:e.target||h.$$.root};a&&a(d.root);let f=!1;if(d.ctx=n?n(t,e.props||{},(e,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&i(d.ctx[e],d.ctx[e]=o)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](o),f&&function(t,e){-1===t.$$.dirty[0]&&(M.push(t),B||(B=!0,O.then(P)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n}):[],d.update(),f=!0,c(d.before_update),d.fragment=!!r&&r(d.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);d.fragment&&d.fragment.l(t),t.forEach(g)}else d.fragment&&d.fragment.c();e.intro&&j(t.$$.fragment),Q(t,e.target,e.anchor,e.customElement),P()}T(h)}class X{$destroy(){J(this,1),this.$destroy=o}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var q;function tt(t){return t.nodeType===t.ELEMENT_NODE}!function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"}(q||(q={}));var et=function(){function t(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return t.prototype.getId=function(t){var e;if(!t)return-1;var n=null===(e=this.getMeta(t))||void 0===e?void 0:e.id;return null!=n?n:-1},t.prototype.getNode=function(t){return this.idNodeMap.get(t)||null},t.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},t.prototype.getMeta=function(t){return this.nodeMetaMap.get(t)||null},t.prototype.removeNodeFromMap=function(t){var e=this,n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(function(t){return e.removeNodeFromMap(t)})},t.prototype.has=function(t){return this.idNodeMap.has(t)},t.prototype.hasNode=function(t){return this.nodeMetaMap.has(t)},t.prototype.add=function(t,e){var n=e.id;this.idNodeMap.set(n,t),this.nodeMetaMap.set(t,e)},t.prototype.replace=function(t,e){var n=this.getNode(t);if(n){var r=this.nodeMetaMap.get(n);r&&this.nodeMetaMap.set(e,r)}this.idNodeMap.set(t,e)},t.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},t}();function nt(){return new et}var rt=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function it(t,e){void 0===e&&(e={});var n=1,r=1;function i(t){var e=t.match(/\n/g);e&&(n+=e.length);var i=t.lastIndexOf("\n");r=-1===i?r+t.length:t.length-i}function o(){var t={line:n,column:r};return function(e){return e.position=new s(t),f(),e}}var s=function(t){this.start=t,this.end={line:n,column:r},this.source=e.source};s.prototype.content=t;var a=[];function l(i){var o=new Error("".concat(e.source||"",":").concat(n,":").concat(r,": ").concat(i));if(o.reason=i,o.filename=e.source,o.line=n,o.column=r,o.source=t,!e.silent)throw o;a.push(o)}function c(){return d(/^{\s*/)}function u(){return d(/^}/)}function h(){var e,n=[];for(f(),p(n);t.length&&"}"!==t.charAt(0)&&(e=S()||N());)!1!==e&&(n.push(e),p(n));return n}function d(e){var n=e.exec(t);if(n){var r=n[0];return i(r),t=t.slice(r.length),n}}function f(){d(/^\s*/)}function p(t){var e;for(void 0===t&&(t=[]);e=g();)!1!==e&&t.push(e),e=g();return t}function g(){var e=o();if("/"===t.charAt(0)&&"*"===t.charAt(1)){for(var n=2;""!==t.charAt(n)&&("*"!==t.charAt(n)||"/"!==t.charAt(n+1));)++n;if(n+=2,""===t.charAt(n-1))return l("End of comment missing");var s=t.slice(2,n-2);return r+=2,i(s),t=t.slice(n),r+=2,e({type:"comment",comment:s})}}function m(){var t=d(/^([^{]+)/);if(t)return ot(t[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(t){return t.replace(/,/g,"‌")}).split(/\s*(?![^(]*\)),\s*/).map(function(t){return t.replace(/\u200C/g,",")})}function y(){var t=o(),e=d(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(e){var n=ot(e[0]);if(!d(/^:\s*/))return l("property missing ':'");var r=d(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),i=t({type:"declaration",property:n.replace(rt,""),value:r?ot(r[0]).replace(rt,""):""});return d(/^[;\s]*/),i}}function v(){var t,e=[];if(!c())return l("missing '{'");for(p(e);t=y();)!1!==t&&(e.push(t),p(e)),t=y();return u()?e:l("missing '}'")}function C(){for(var t,e=[],n=o();t=d(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)e.push(t[1]),d(/^,\s*/);if(e.length)return n({type:"keyframe",values:e,declarations:v()})}var b,I=E("import"),w=E("charset"),A=E("namespace");function E(t){var e=new RegExp("^@"+t+"\\s*([^;]+);");return function(){var n=o(),r=d(e);if(r){var i={type:t};return i[t]=r[1].trim(),n(i)}}}function S(){if("@"===t[0])return function(){var t=o(),e=d(/^@([-\w]+)?keyframes\s*/);if(e){var n=e[1];if(!(e=d(/^([-\w]+)\s*/)))return l("@keyframes missing name");var r,i=e[1];if(!c())return l("@keyframes missing '{'");for(var s=p();r=C();)s.push(r),s=s.concat(p());return u()?t({type:"keyframes",name:i,vendor:n,keyframes:s}):l("@keyframes missing '}'")}}()||function(){var t=o(),e=d(/^@media *([^{]+)/);if(e){var n=ot(e[1]);if(!c())return l("@media missing '{'");var r=p().concat(h());return u()?t({type:"media",media:n,rules:r}):l("@media missing '}'")}}()||function(){var t=o(),e=d(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(e)return t({type:"custom-media",name:ot(e[1]),media:ot(e[2])})}()||function(){var t=o(),e=d(/^@supports *([^{]+)/);if(e){var n=ot(e[1]);if(!c())return l("@supports missing '{'");var r=p().concat(h());return u()?t({type:"supports",supports:n,rules:r}):l("@supports missing '}'")}}()||I()||w()||A()||function(){var t=o(),e=d(/^@([-\w]+)?document *([^{]+)/);if(e){var n=ot(e[1]),r=ot(e[2]);if(!c())return l("@document missing '{'");var i=p().concat(h());return u()?t({type:"document",document:r,vendor:n,rules:i}):l("@document missing '}'")}}()||function(){var t=o();if(d(/^@page */)){var e=m()||[];if(!c())return l("@page missing '{'");for(var n,r=p();n=y();)r.push(n),r=r.concat(p());return u()?t({type:"page",selectors:e,declarations:r}):l("@page missing '}'")}}()||function(){var t=o();if(d(/^@host\s*/)){if(!c())return l("@host missing '{'");var e=p().concat(h());return u()?t({type:"host",rules:e}):l("@host missing '}'")}}()||function(){var t=o();if(d(/^@font-face\s*/)){if(!c())return l("@font-face missing '{'");for(var e,n=p();e=y();)n.push(e),n=n.concat(p());return u()?t({type:"font-face",declarations:n}):l("@font-face missing '}'")}}()}function N(){var t=o(),e=m();return e?(p(),t({type:"rule",selectors:e,declarations:v()})):l("selector missing")}return function t(e,n){for(var r=e&&"string"==typeof e.type,i=r?e:n,o=0,s=Object.keys(e);o<s.length;o++){var a=e[s[o]];Array.isArray(a)?a.forEach(function(e){t(e,i)}):a&&"object"==typeof a&&t(a,i)}return r&&Object.defineProperty(e,"parent",{configurable:!0,writable:!0,enumerable:!1,value:n||null}),e}((b=h(),{type:"stylesheet",stylesheet:{source:e.source,rules:b,parsingErrors:a}}))}function ot(t){return t?t.replace(/^\s+|\s+$/g,""):""}var st={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"},at=/([^\\]):hover/,lt=new RegExp(at.source,"g");function ct(t,e){var n=null==e?void 0:e.stylesWithHoverClass.get(t);if(n)return n;var r=it(t,{silent:!0});if(!r.stylesheet)return t;var i=[];if(r.stylesheet.rules.forEach(function(t){"selectors"in t&&(t.selectors||[]).forEach(function(t){at.test(t)&&i.push(t)})}),0===i.length)return t;var o=new RegExp(i.filter(function(t,e){return i.indexOf(t)===e}).sort(function(t,e){return e.length-t.length}).map(function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}).join("|"),"g"),s=t.replace(o,function(t){var e=t.replace(lt,"$1.\\:hover");return"".concat(t,", ").concat(e)});return null==e||e.stylesWithHoverClass.set(t,s),s}function ut(){return{stylesWithHoverClass:new Map}}function ht(t,e){var n=e.doc,r=e.mirror,i=e.skipChild,o=void 0!==i&&i,s=e.hackCss,a=void 0===s||s,l=e.afterAppend,c=e.cache,u=function(t,e){var n=e.doc,r=e.hackCss,i=e.cache;switch(t.type){case q.Document:return n.implementation.createDocument(null,"",null);case q.DocumentType:return n.implementation.createDocumentType(t.name||"html",t.publicId,t.systemId);case q.Element:var o,s=function(t){var e=st[t.tagName]?st[t.tagName]:t.tagName;return"link"===e&&t.attributes._cssText&&(e="style"),e}(t);o=t.isSVG?n.createElementNS("http://www.w3.org/2000/svg",s):n.createElement(s);var a={};for(var l in t.attributes)if(Object.prototype.hasOwnProperty.call(t.attributes,l)){var c=t.attributes[l];if("option"!==s||"selected"!==l||!1!==c)if(!0===c&&(c=""),l.startsWith("rr_"))a[l]=c;else{var u="textarea"===s&&"value"===l,h="style"===s&&"_cssText"===l;if(h&&r&&"string"==typeof c&&(c=ct(c,i)),!u&&!h||"string"!=typeof c)try{if(t.isSVG&&"xlink:href"===l)o.setAttributeNS("http://www.w3.org/1999/xlink",l,c.toString());else if("onload"===l||"onclick"===l||"onmouse"===l.substring(0,7))o.setAttribute("_"+l,c.toString());else{if("meta"===s&&"Content-Security-Policy"===t.attributes["http-equiv"]&&"content"===l){o.setAttribute("csp-content",c.toString());continue}"link"===s&&"preload"===t.attributes.rel&&"script"===t.attributes.as||"link"===s&&"prefetch"===t.attributes.rel&&"string"==typeof t.attributes.href&&t.attributes.href.endsWith(".js")||("img"===s&&t.attributes.srcset&&t.attributes.rr_dataURL?o.setAttribute("rrweb-original-srcset",t.attributes.srcset):o.setAttribute(l,c.toString()))}}catch(t){}else{for(var d=n.createTextNode(c),f=0,p=Array.from(o.childNodes);f<p.length;f++){var g=p[f];g.nodeType===o.TEXT_NODE&&o.removeChild(g)}o.appendChild(d)}}}var m=function(e){var n=a[e];if("canvas"===s&&"rr_dataURL"===e){var r=document.createElement("img");r.onload=function(){var t=o.getContext("2d");t&&t.drawImage(r,0,0,r.width,r.height)},r.src=n.toString(),o.RRNodeType&&(o.rr_dataURL=n.toString())}else if("img"===s&&"rr_dataURL"===e){var i=o;i.currentSrc.startsWith("data:")||(i.setAttribute("rrweb-original-src",t.attributes.src),i.src=n.toString())}if("rr_width"===e)o.style.width=n.toString();else if("rr_height"===e)o.style.height=n.toString();else if("rr_mediaCurrentTime"===e&&"number"==typeof n)o.currentTime=n;else if("rr_mediaState"===e)switch(n){case"played":o.play().catch(function(t){return console.warn("media playback error",t)});break;case"paused":o.pause()}};for(var y in a)m(y);if(t.isShadowHost)if(o.shadowRoot)for(;o.shadowRoot.firstChild;)o.shadowRoot.removeChild(o.shadowRoot.firstChild);else o.attachShadow({mode:"open"});return o;case q.Text:return n.createTextNode(t.isStyle&&r?ct(t.textContent,i):t.textContent);case q.CDATA:return n.createCDATASection(t.textContent);case q.Comment:return n.createComment(t.textContent);default:return null}}(t,{doc:n,hackCss:a,cache:c});if(!u)return null;if(t.rootId&&r.getNode(t.rootId)!==n&&r.replace(t.rootId,n),t.type===q.Document&&(n.close(),n.open(),"BackCompat"===t.compatMode&&t.childNodes&&t.childNodes[0].type!==q.DocumentType&&(t.childNodes[0].type===q.Element&&"xmlns"in t.childNodes[0].attributes&&"http://www.w3.org/1999/xhtml"===t.childNodes[0].attributes.xmlns?n.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):n.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),u=n),r.add(u,t),(t.type===q.Document||t.type===q.Element)&&!o)for(var h=0,d=t.childNodes;h<d.length;h++){var f=d[h],p=ht(f,{doc:n,mirror:r,skipChild:!1,hackCss:a,afterAppend:l,cache:c});p?(f.isShadow&&tt(u)&&u.shadowRoot?u.shadowRoot.appendChild(p):u.appendChild(p),l&&l(p,f.id)):console.warn("Failed to rebuild",f)}return u}const dt="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let ft={map:{},getId:()=>(console.error(dt),-1),getNode:()=>(console.error(dt),null),removeNodeFromMap(){console.error(dt)},has:()=>(console.error(dt),!1),reset(){console.error(dt)}};function pt(t){const e={},n=(t,n)=>{const r={value:t,parent:n,children:[]};return e[t.node.id]=r,r},r=[];for(const i of t){const{nextId:t,parentId:o}=i;if(t&&t in e){const o=e[t];if(o.parent){const t=o.parent.children.indexOf(o);o.parent.children.splice(t,0,n(i,o.parent))}else{const t=r.indexOf(o);r.splice(t,0,n(i,null))}}else if(o in e){const t=e[o];t.children.push(n(i,t))}else r.push(n(i,null))}return r}function gt(t,e){e(t.value);for(let n=t.children.length-1;n>=0;n--)gt(t.children[n],e)}function mt(t,e){return Boolean("IFRAME"===t.nodeName&&e.getMeta(t))}function yt(t){return Boolean(null==t?void 0:t.shadowRoot)}function vt(t,e){const n=t[e[0]];return 1===e.length?n:vt(n.cssRules[e[1]].cssRules,e.slice(2))}function Ct(t){const e=[...t];return{positions:e,index:e.pop()}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(ft=new Proxy(ft,{get:(t,e,n)=>("map"===e&&console.error(dt),Reflect.get(t,e,n))}));class bt{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){var e;return null!==(e=this.styleIDMap.get(t))&&void 0!==e?e:-1}has(t){return this.styleIDMap.has(t)}add(t,e){if(this.has(t))return this.getId(t);let n;return n=void 0===e?this.id++:e,this.styleIDMap.set(t,n),this.idStyleMap.set(n,t),n}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}var It=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(It||{}),wt=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t))(wt||{}),At=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(At||{}),Et=(t=>(t[t["2D"]=0]="2D",t[t.WebGL=1]="WebGL",t[t.WebGL2=2]="WebGL2",t))(Et||{}),St=(t=>(t.Start="start",t.Pause="pause",t.Resume="resume",t.Resize="resize",t.Finish="finish",t.FullsnapshotRebuilded="fullsnapshot-rebuilded",t.LoadStylesheetStart="load-stylesheet-start",t.LoadStylesheetEnd="load-stylesheet-end",t.SkipStart="skip-start",t.SkipEnd="skip-end",t.MouseInteraction="mouse-interaction",t.EventCast="event-cast",t.CustomEvent="custom-event",t.Flush="flush",t.StateChange="state-change",t.PlayBack="play-back",t.Destroy="destroy",t))(St||{});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Nt(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{l(r.next(t))}catch(t){o(t)}}function a(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}l((r=r.apply(t,e||[])).next())})}for(var Tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rt="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Dt=0;Dt<Tt.length;Dt++)Rt[Tt.charCodeAt(Dt)]=Dt;var xt,Mt;try{var _t=void 0!==t&&"function"==typeof t.require&&t.require("worker_threads")||"function"==typeof require&&require("worker_threads")||n(!function(){var t=new Error('Cannot find module "worker_threads"');throw t.code="MODULE_NOT_FOUND",t}());_t.Worker}catch(Ye){}xt="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=","[object process]"===Object.prototype.toString.call(void 0!==i?i:0)&&function(t,e,n){var i=void 0===e?null:e,o=function(t,e){return r.from(t,"base64").toString(e?"utf16":"utf8")}(t,void 0!==n&&n),s=o.indexOf("\n",10)+1,a=o.substring(s)+(i?"//# sourceMappingURL="+i:"")}(xt,null,!1),nt(),function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"}(Mt||(Mt={}));var kt=function(){function t(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return t.prototype.getId=function(t){var e;if(!t)return-1;var n=null===(e=this.getMeta(t))||void 0===e?void 0:e.id;return null!=n?n:-1},t.prototype.getNode=function(t){return this.idNodeMap.get(t)||null},t.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},t.prototype.getMeta=function(t){return this.nodeMetaMap.get(t)||null},t.prototype.removeNodeFromMap=function(t){var e=this,n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(function(t){return e.removeNodeFromMap(t)})},t.prototype.has=function(t){return this.idNodeMap.has(t)},t.prototype.hasNode=function(t){return this.nodeMetaMap.has(t)},t.prototype.add=function(t,e){var n=e.id;this.idNodeMap.set(n,t),this.nodeMetaMap.set(t,e)},t.prototype.replace=function(t,e){var n=this.getNode(t);if(n){var r=this.nodeMetaMap.get(n);r&&this.nodeMetaMap.set(e,r)}this.idNodeMap.set(t,e)},t.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},t}();function Ft(t){const e=[];for(const n in t){const r=t[n];if("string"!=typeof r)continue;const i=$t(n);e.push(`${i}: ${r};`)}return e.join(" ")}const Ot=/-([a-z])/g,Bt=/^--[a-zA-Z0-9-]+$/,Lt=t=>Bt.test(t)?t:t.replace(Ot,(t,e)=>e?e.toUpperCase():""),Ut=/\B([A-Z])/g,$t=t=>t.replace(Ut,"-$1").toLowerCase();class Pt{constructor(...t){this.childNodes=[],this.parentElement=null,this.parentNode=null,this.ELEMENT_NODE=Kt.ELEMENT_NODE,this.TEXT_NODE=Kt.TEXT_NODE}get firstChild(){return this.childNodes[0]||null}get lastChild(){return this.childNodes[this.childNodes.length-1]||null}get nextSibling(){const t=this.parentNode;if(!t)return null;const e=t.childNodes;return e[e.indexOf(this)+1]||null}contains(t){if(t===this)return!0;for(const e of this.childNodes)if(e.contains(t))return!0;return!1}appendChild(t){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(t,e){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(t){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}function Vt(t){return class extends t{constructor(t,e,n){super(),this.nodeType=Kt.DOCUMENT_TYPE_NODE,this.RRNodeType=Mt.DocumentType,this.textContent=null,this.name=t,this.publicId=e,this.systemId=n,this.nodeName=t}toString(){return"RRDocumentType"}}}function Gt(t){return class extends t{constructor(t){super(),this.nodeType=Kt.ELEMENT_NODE,this.RRNodeType=Mt.Element,this.attributes={},this.shadowRoot=null,this.tagName=t.toUpperCase(),this.nodeName=t.toUpperCase()}get textContent(){let t="";return this.childNodes.forEach(e=>t+=e.textContent),t}set textContent(t){this.childNodes=[this.ownerDocument.createTextNode(t)]}get classList(){return new jt(this.attributes.class,t=>{this.attributes.class=t})}get id(){return this.attributes.id||""}get className(){return this.attributes.class||""}get style(){const t=this.attributes.style?function(t){const e={},n=/:(.+)/;return t.replace(/\/\*.*?\*\//g,"").split(/;(?![^(]*\))/g).forEach(function(t){if(t){const r=t.split(n);r.length>1&&(e[Lt(r[0].trim())]=r[1].trim())}}),e}(this.attributes.style):{},e=/\B([A-Z])/g;return t.setProperty=((n,r,i)=>{if(e.test(n))return;const o=Lt(n);r?t[o]=r:delete t[o],"important"===i&&(t[o]+=" !important"),this.attributes.style=Ft(t)}),t.removeProperty=(n=>{if(e.test(n))return"";const r=Lt(n),i=t[r]||"";return delete t[r],this.attributes.style=Ft(t),i}),t}getAttribute(t){return this.attributes[t]||null}setAttribute(t,e){this.attributes[t]=e}setAttributeNS(t,e,n){this.setAttribute(e,n)}removeAttribute(t){delete this.attributes[t]}appendChild(t){return this.childNodes.push(t),t.parentNode=this,t.parentElement=this,t}insertBefore(t,e){if(null===e)return this.appendChild(t);const n=this.childNodes.indexOf(e);if(-1==n)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return this.childNodes.splice(n,0,t),t.parentElement=this,t.parentNode=this,t}removeChild(t){const e=this.childNodes.indexOf(t);if(-1===e)throw new Error("Failed to execute 'removeChild' on 'RRElement': The RRNode to be removed is not a child of this RRNode.");return this.childNodes.splice(e,1),t.parentElement=null,t.parentNode=null,t}attachShadow(t){const e=this.ownerDocument.createElement("SHADOWROOT");return this.shadowRoot=e,e}dispatchEvent(t){return!0}toString(){let t="";for(const e in this.attributes)t+=`${e}="${this.attributes[e]}" `;return`${this.tagName} ${t}`}}}function Yt(t){return class extends t{constructor(t){super(),this.nodeType=Kt.TEXT_NODE,this.nodeName="#text",this.RRNodeType=Mt.Text,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRText text=${JSON.stringify(this.data)}`}}}function Wt(t){return class extends t{constructor(t){super(),this.nodeType=Kt.COMMENT_NODE,this.nodeName="#comment",this.RRNodeType=Mt.Comment,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRComment text=${JSON.stringify(this.data)}`}}}function Zt(t){return class extends t{constructor(t){super(),this.nodeName="#cdata-section",this.nodeType=Kt.CDATA_SECTION_NODE,this.RRNodeType=Mt.CDATA,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRCDATASection data=${JSON.stringify(this.data)}`}}}class jt{constructor(t,e){if(this.classes=[],this.add=((...t)=>{for(const e of t){const t=String(e);this.classes.indexOf(t)>=0||this.classes.push(t)}this.onChange&&this.onChange(this.classes.join(" "))}),this.remove=((...t)=>{this.classes=this.classes.filter(e=>-1===t.indexOf(e)),this.onChange&&this.onChange(this.classes.join(" "))}),t){const e=t.trim().split(/\s+/);this.classes.push(...e)}this.onChange=e}}var Kt;!function(t){t[t.PLACEHOLDER=0]="PLACEHOLDER",t[t.ELEMENT_NODE=1]="ELEMENT_NODE",t[t.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",t[t.TEXT_NODE=3]="TEXT_NODE",t[t.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",t[t.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",t[t.ENTITY_NODE=6]="ENTITY_NODE",t[t.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",t[t.COMMENT_NODE=8]="COMMENT_NODE",t[t.DOCUMENT_NODE=9]="DOCUMENT_NODE",t[t.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",t[t.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE"}(Kt||(Kt={}));const zt={svg:"http://www.w3.org/2000/svg","xlink:href":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},Qt={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function Jt(t,e,n,r){const i=t.childNodes,o=e.childNodes;r=r||e.mirror||e.ownerDocument.mirror,(i.length>0||o.length>0)&&Ht(Array.from(i),o,t,n,r);let s=null,a=null;switch(e.RRNodeType){case Mt.Document:a=e.scrollData;break;case Mt.Element:{const i=t,o=e;switch(function(t,e,n){const r=t.attributes,i=e.attributes;for(const r in i){const o=i[r],s=n.getMeta(e);if(s&&"isSVG"in s&&s.isSVG&&zt[r])t.setAttributeNS(zt[r],r,o);else if("CANVAS"===e.tagName&&"rr_dataURL"===r){const e=document.createElement("img");e.src=o,e.onload=(()=>{const n=t.getContext("2d");n&&n.drawImage(e,0,0,e.width,e.height)})}else t.setAttribute(r,o)}for(const{name:e}of Array.from(r))e in i||t.removeAttribute(e);e.scrollLeft&&(t.scrollLeft=e.scrollLeft),e.scrollTop&&(t.scrollTop=e.scrollTop)}(i,o,r),a=o.scrollData,s=o.inputData,o.tagName){case"AUDIO":case"VIDEO":{const e=t,n=o;void 0!==n.paused&&(n.paused?e.pause():e.play()),void 0!==n.muted&&(e.muted=n.muted),void 0!==n.volume&&(e.volume=n.volume),void 0!==n.currentTime&&(e.currentTime=n.currentTime),void 0!==n.playbackRate&&(e.playbackRate=n.playbackRate);break}case"CANVAS":{const r=e;if(null!==r.rr_dataURL){const t=document.createElement("img");t.onload=(()=>{const e=i.getContext("2d");e&&e.drawImage(t,0,0,t.width,t.height)}),t.src=r.rr_dataURL}r.canvasMutations.forEach(e=>n.applyCanvas(e.event,e.mutation,t))}break;case"STYLE":{const t=i.sheet;t&&e.rules.forEach(e=>n.applyStyleSheetMutation(e,t))}}if(o.shadowRoot){i.shadowRoot||i.attachShadow({mode:"open"});const t=i.shadowRoot.childNodes,e=o.shadowRoot.childNodes;(t.length>0||e.length>0)&&Ht(Array.from(t),e,i.shadowRoot,n,r)}break}case Mt.Text:case Mt.Comment:case Mt.CDATA:t.textContent!==e.data&&(t.textContent=e.data)}if(a&&n.applyScroll(a,!0),s&&n.applyInput(s),"IFRAME"===e.nodeName){const i=t.contentDocument,o=e;if(i){const t=r.getMeta(o.contentDocument);t&&n.mirror.add(i,Object.assign({},t)),Jt(i,o.contentDocument,n,r)}}}function Ht(t,e,n,r,i){var o;let s,a,l=0,c=t.length-1,u=0,h=e.length-1,d=t[l],f=t[c],p=e[u],g=e[h];for(;l<=c&&u<=h;){const m=r.mirror.getId(d),y=r.mirror.getId(f),v=i.getId(p),C=i.getId(g);if(void 0===d)d=t[++l];else if(void 0===f)f=t[--c];else if(-1!==m&&m===v)Jt(d,p,r,i),d=t[++l],p=e[++u];else if(-1!==y&&y===C)Jt(f,g,r,i),f=t[--c],g=e[--h];else if(-1!==m&&m===C)n.insertBefore(d,f.nextSibling),Jt(d,g,r,i),d=t[++l],g=e[--h];else if(-1!==y&&y===v)n.insertBefore(f,d),Jt(f,p,r,i),f=t[--c],p=e[++u];else{if(!s){s={};for(let e=l;e<=c;e++){const n=t[e];n&&r.mirror.hasNode(n)&&(s[r.mirror.getId(n)]=e)}}if(a=s[i.getId(p)]){const e=t[a];n.insertBefore(e,d),Jt(e,p,r,i),t[a]=void 0}else{const e=Xt(p,r.mirror,i);"#document"===n.nodeName&&(null===(o=r.mirror.getMeta(e))||void 0===o?void 0:o.type)===Mt.Element&&n.documentElement&&(n.removeChild(n.documentElement),t[l]=void 0,d=void 0),n.insertBefore(e,d||null),Jt(e,p,r,i)}p=e[++u]}}if(l>c){const t=e[h+1];let o=null;for(t&&n.childNodes.forEach(e=>{r.mirror.getId(e)===i.getId(t)&&(o=e)});u<=h;++u){const t=Xt(e[u],r.mirror,i);n.insertBefore(t,o),Jt(t,e[u],r,i)}}else if(u>h)for(;l<=c;l++){const e=t[l];e&&(n.removeChild(e),r.mirror.removeNodeFromMap(e))}}function Xt(t,e,n){const r=n.getId(t),i=n.getMeta(t);let o=null;if(r>-1&&(o=e.getNode(r)),null!==o)return o;switch(t.RRNodeType){case Mt.Document:o=new Document;break;case Mt.DocumentType:o=document.implementation.createDocumentType(t.name,t.publicId,t.systemId);break;case Mt.Element:{let e=t.tagName.toLowerCase();e=Qt[e]||e,o=i&&"isSVG"in i&&(null==i?void 0:i.isSVG)?document.createElementNS(zt.svg,e):document.createElement(t.tagName);break}case Mt.Text:o=document.createTextNode(t.data);break;case Mt.Comment:o=document.createComment(t.data);break;case Mt.CDATA:o=document.createCDATASection(t.data)}return i&&e.add(o,Object.assign({},i)),o}class qt extends(function(t){return class e extends t{constructor(){super(...arguments),this.nodeType=Kt.DOCUMENT_NODE,this.nodeName="#document",this.compatMode="CSS1Compat",this.RRNodeType=Mt.Document,this.textContent=null}get documentElement(){return this.childNodes.find(t=>t.RRNodeType===Mt.Element&&"HTML"===t.tagName)||null}get body(){var t;return(null===(t=this.documentElement)||void 0===t?void 0:t.childNodes.find(t=>t.RRNodeType===Mt.Element&&"BODY"===t.tagName))||null}get head(){var t;return(null===(t=this.documentElement)||void 0===t?void 0:t.childNodes.find(t=>t.RRNodeType===Mt.Element&&"HEAD"===t.tagName))||null}get implementation(){return this}get firstElementChild(){return this.documentElement}appendChild(t){const e=t.RRNodeType;if((e===Mt.Element||e===Mt.DocumentType)&&this.childNodes.some(t=>t.RRNodeType===e))throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${e===Mt.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);return t.parentElement=null,t.parentNode=this,this.childNodes.push(t),t}insertBefore(t,e){const n=t.RRNodeType;if((n===Mt.Element||n===Mt.DocumentType)&&this.childNodes.some(t=>t.RRNodeType===n))throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${n===Mt.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);if(null===e)return this.appendChild(t);const r=this.childNodes.indexOf(e);if(-1==r)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return this.childNodes.splice(r,0,t),t.parentElement=null,t.parentNode=this,t}removeChild(t){const e=this.childNodes.indexOf(t);if(-1===e)throw new Error("Failed to execute 'removeChild' on 'RRDocument': The RRNode to be removed is not a child of this RRNode.");return this.childNodes.splice(e,1),t.parentElement=null,t.parentNode=null,t}open(){this.childNodes=[]}close(){}write(t){let e;if('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'===t?e="-//W3C//DTD XHTML 1.0 Transitional//EN":'<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">'===t&&(e="-//W3C//DTD HTML 4.0 Transitional//EN"),e){const t=this.createDocumentType("html",e,"");this.open(),this.appendChild(t)}}createDocument(t,n,r){return new e}createDocumentType(t,e,n){const r=new(Vt(Pt))(t,e,n);return r.ownerDocument=this,r}createElement(t){const e=new(Gt(Pt))(t);return e.ownerDocument=this,e}createElementNS(t,e){return this.createElement(e)}createTextNode(t){const e=new(Yt(Pt))(t);return e.ownerDocument=this,e}createComment(t){const e=new(Wt(Pt))(t);return e.ownerDocument=this,e}createCDATASection(t){const e=new(Zt(Pt))(t);return e.ownerDocument=this,e}toString(){return"RRDocument"}}}(Pt)){constructor(t){super(),this.UNSERIALIZED_STARTING_ID=-2,this._unserializedId=this.UNSERIALIZED_STARTING_ID,this.mirror=new ue,this.scrollData=null,t&&(this.mirror=t)}get unserializedId(){return this._unserializedId--}createDocument(t,e,n){return new qt}createDocumentType(t,e,n){const r=new te(t,e,n);return r.ownerDocument=this,r}createElement(t){const e=t.toUpperCase();let n;switch(e){case"AUDIO":case"VIDEO":n=new ne(e);break;case"IFRAME":n=new oe(e,this.mirror);break;case"CANVAS":n=new re(e);break;case"STYLE":n=new ie(e);break;default:n=new ee(e)}return n.ownerDocument=this,n}createComment(t){const e=new ae(t);return e.ownerDocument=this,e}createCDATASection(t){const e=new le(t);return e.ownerDocument=this,e}createTextNode(t){const e=new se(t);return e.ownerDocument=this,e}destroyTree(){this.childNodes=[],this.mirror.reset()}open(){super.open(),this._unserializedId=this.UNSERIALIZED_STARTING_ID}}const te=Vt(Pt);class ee extends(Gt(Pt)){constructor(){super(...arguments),this.inputData=null,this.scrollData=null}}class ne extends(function(t){return class extends t{attachShadow(t){throw new Error("RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow")}play(){this.paused=!1}pause(){this.paused=!0}}}(ee)){}class re extends ee{constructor(){super(...arguments),this.rr_dataURL=null,this.canvasMutations=[]}getContext(){return null}}class ie extends ee{constructor(){super(...arguments),this.rules=[]}}class oe extends ee{constructor(t,e){super(t),this.contentDocument=new qt,this.contentDocument.mirror=e}}const se=Yt(Pt),ae=Wt(Pt),le=Zt(Pt);function ce(t,e,n,r){let i;switch(t.nodeType){case Kt.DOCUMENT_NODE:r&&"IFRAME"===r.nodeName?i=r.contentDocument:(i=e).compatMode=t.compatMode;break;case Kt.DOCUMENT_TYPE_NODE:{const n=t;i=e.createDocumentType(n.name,n.publicId,n.systemId);break}case Kt.ELEMENT_NODE:{const n=t,r=n instanceof HTMLFormElement?"FORM":n.tagName.toUpperCase(),o=i=e.createElement(r);for(const{name:t,value:e}of Array.from(n.attributes))o.attributes[t]=e;n.scrollLeft&&(o.scrollLeft=n.scrollLeft),n.scrollTop&&(o.scrollTop=n.scrollTop);break}case Kt.TEXT_NODE:i=e.createTextNode(t.textContent||"");break;case Kt.CDATA_SECTION_NODE:i=e.createCDATASection(t.data);break;case Kt.COMMENT_NODE:i=e.createComment(t.textContent||"");break;case Kt.DOCUMENT_FRAGMENT_NODE:i=r.attachShadow({mode:"open"});break;default:return null}let o=n.getMeta(t);return e instanceof qt&&(o||(o=he(i,e.unserializedId),n.add(t,o)),e.mirror.add(i,Object.assign({},o))),i}class ue{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){var e;if(!t)return-1;const n=null===(e=this.getMeta(t))||void 0===e?void 0:e.id;return null!=n?n:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const e=this.getId(t);this.idNodeMap.delete(e),t.childNodes&&t.childNodes.forEach(t=>this.removeNodeFromMap(t))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,e){const n=e.id;this.idNodeMap.set(n,t),this.nodeMetaMap.set(t,e)}replace(t,e){const n=this.getNode(t);if(n){const t=this.nodeMetaMap.get(n);t&&this.nodeMetaMap.set(e,t)}this.idNodeMap.set(t,e)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function he(t,e){switch(t.RRNodeType){case Mt.Document:return{id:e,type:t.RRNodeType,childNodes:[]};case Mt.DocumentType:{const n=t;return{id:e,type:t.RRNodeType,name:n.name,publicId:n.publicId,systemId:n.systemId}}case Mt.Element:return{id:e,type:t.RRNodeType,tagName:t.tagName.toLowerCase(),attributes:{},childNodes:[]};case Mt.Text:case Mt.Comment:return{id:e,type:t.RRNodeType,textContent:t.textContent||""};case Mt.CDATA:return{id:e,type:t.RRNodeType,textContent:""}}}var de=Uint8Array,fe=Uint16Array,pe=Uint32Array,ge=new de([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),me=new de([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ye=new de([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ve=function(t,e){for(var n=new fe(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var i=new pe(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},Ce=ve(ge,2),be=Ce[0],Ie=Ce[1];be[28]=258,Ie[258]=28;for(var we=ve(me,0)[0],Ae=new fe(32768),Ee=0;Ee<32768;++Ee){var Se=(43690&Ee)>>>1|(21845&Ee)<<1;Se=(61680&(Se=(52428&Se)>>>2|(13107&Se)<<2))>>>4|(3855&Se)<<4,Ae[Ee]=((65280&Se)>>>8|(255&Se)<<8)>>>1}var Ne=function(t,e,n){for(var r=t.length,i=0,o=new fe(e);i<r;++i)++o[t[i]-1];var s,a=new fe(e);for(i=0;i<e;++i)a[i]=a[i-1]+o[i-1]<<1;if(n){s=new fe(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],u=e-t[i],h=a[t[i]-1]++<<u,d=h|(1<<u)-1;h<=d;++h)s[Ae[h]>>>l]=c}else for(s=new fe(r),i=0;i<r;++i)s[i]=Ae[a[t[i]-1]++]>>>15-t[i];return s},Te=new de(288);for(Ee=0;Ee<144;++Ee)Te[Ee]=8;for(Ee=144;Ee<256;++Ee)Te[Ee]=9;for(Ee=256;Ee<280;++Ee)Te[Ee]=7;for(Ee=280;Ee<288;++Ee)Te[Ee]=8;var Re=new de(32);for(Ee=0;Ee<32;++Ee)Re[Ee]=5;var De=Ne(Te,9,1),xe=Ne(Re,5,1),Me=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},_e=function(t,e,n){var r=e/8>>0;return(t[r]|t[r+1]<<8)>>>(7&e)&n},ke=function(t,e){var n=e/8>>0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>>(7&e)},Fe=function(t,e,n){(null==e||e<0)&&(e=0),(null==n||n>t.length)&&(n=t.length);var r=new(t instanceof fe?fe:t instanceof pe?pe:de)(n-e);return r.set(t.subarray(e,n)),r};const Oe=t=>{if("string"!=typeof t)return t;try{const e=JSON.parse(t);if(e.timestamp)return e}catch(t){}try{const e=JSON.parse(function(t,e){var n="";if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var r=0;r<t.length;){var i=t[r++];i<128?n+=String.fromCharCode(i):i<224?n+=String.fromCharCode((31&i)<<6|63&t[r++]):i<240?n+=String.fromCharCode((15&i)<<12|(63&t[r++])<<6|63&t[r++]):(i=((15&i)<<18|(63&t[r++])<<12|(63&t[r++])<<6|63&t[r++])-65536,n+=String.fromCharCode(55296|i>>10,56320|1023&i))}return n}(function(t,e){return function(t,e,n){var r=t.length,i=!e||n,o=!n||n.i;n||(n={}),e||(e=new de(3*r));var s,a=function(t){var n=e.length;if(t>n){var r=new de(Math.max(2*n,t));r.set(e),e=r}},l=n.f||0,c=n.p||0,u=n.b||0,h=n.l,d=n.d,f=n.m,p=n.n,g=8*r;do{if(!h){n.f=l=_e(t,c,1);var m=_e(t,c+1,3);if(c+=3,!m){var y=t[(R=((s=c)/8>>0)+(7&s&&1)+4)-4]|t[R-3]<<8,v=R+y;if(v>r){if(o)throw"unexpected EOF";break}i&&a(u+y),e.set(t.subarray(R,v),u),n.b=u+=y,n.p=c=8*v;continue}if(1==m)h=De,d=xe,f=9,p=5;else{if(2!=m)throw"invalid block type";var C=_e(t,c,31)+257,b=_e(t,c+10,15)+4,I=C+_e(t,c+5,31)+1;c+=14;for(var w=new de(I),A=new de(19),E=0;E<b;++E)A[ye[E]]=_e(t,c+3*E,7);c+=3*b;var S=Me(A),N=(1<<S)-1;if(!o&&c+I*(S+7)>g)break;var T=Ne(A,S,1);for(E=0;E<I;){var R,D=T[_e(t,c,N)];if(c+=15&D,(R=D>>>4)<16)w[E++]=R;else{var x=0,M=0;for(16==R?(M=3+_e(t,c,3),c+=2,x=w[E-1]):17==R?(M=3+_e(t,c,7),c+=3):18==R&&(M=11+_e(t,c,127),c+=7);M--;)w[E++]=x}}var _=w.subarray(0,C),k=w.subarray(C);f=Me(_),p=Me(k),h=Ne(_,f,1),d=Ne(k,p,1)}if(c>g)throw"unexpected EOF"}i&&a(u+131072);for(var F=(1<<f)-1,O=(1<<p)-1,B=f+p+18;o||c+B<g;){var L=(x=h[ke(t,c)&F])>>>4;if((c+=15&x)>g)throw"unexpected EOF";if(!x)throw"invalid length/literal";if(L<256)e[u++]=L;else{if(256==L){h=null;break}var U=L-254;if(L>264){var $=ge[E=L-257];U=_e(t,c,(1<<$)-1)+be[E],c+=$}var P=d[ke(t,c)&O],V=P>>>4;if(!P)throw"invalid distance";if(c+=15&P,k=we[V],V>3&&($=me[V],k+=ke(t,c)&(1<<$)-1,c+=$),c>g)throw"unexpected EOF";i&&a(u+131072);for(var G=u+U;u<G;u+=4)e[u]=e[u-k],e[u+1]=e[u+1-k],e[u+2]=e[u+2-k],e[u+3]=e[u+3-k];u=G}}n.l=h,n.p=c,n.b=u,h&&(l=1,n.m=f,n.d=d,n.n=p)}while(!l);return u==e.length?e:Fe(e,0,u)}((function(t){if(8!=(15&t[0])||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(32&t[1])throw"invalid zlib data: preset dictionaries not supported"}(t),t.subarray(2,-4)),e)}(function(t,e){var n=t.length;for(var r=new de(t.length+(t.length>>>1)),i=0,o=function(t){r[i++]=t},s=0;s<n;++s){if(i+5>r.length){var a=new de(i+8+(n-s<<1));a.set(r),r=a}var l=t.charCodeAt(s);o(l)}return Fe(r,0,i)}(t))));if("v1"===e.v)return e;throw new Error(`These events were packed with packer ${e.v} which is incompatible with current packer v1.`)}catch(t){throw console.error(t),new Error("Unknown data format.")}};function Be(t){return{all:t=t||new Map,on:function(e,n){var r=t.get(e);r?r.push(n):t.set(e,[n])},off:function(e,n){var r=t.get(e);r&&(n?r.splice(r.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var r=t.get(e);r&&r.slice().map(function(t){t(n)}),(r=t.get("*"))&&r.slice().map(function(t){t(e,n)})}}}var Le,Ue=Object.freeze({__proto__:null,default:Be});function $e(t=window,e=document){if("scrollBehavior"in e.documentElement.style&&!0!==t.__forceSmoothScrollPolyfill__)return;const n=t.HTMLElement||t.Element,r={scroll:t.scroll||t.scrollTo,scrollBy:t.scrollBy,elementScroll:n.prototype.scroll||a,scrollIntoView:n.prototype.scrollIntoView},i=t.performance&&t.performance.now?t.performance.now.bind(t.performance):Date.now,o=(s=t.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(s)?1:0);var s;function a(t,e){this.scrollLeft=t,this.scrollTop=e}function l(t){if(null===t||"object"!=typeof t||void 0===t.behavior||"auto"===t.behavior||"instant"===t.behavior)return!0;if("object"==typeof t&&"smooth"===t.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+t.behavior+" is not a valid value for enumeration ScrollBehavior.")}function c(t,e){return"Y"===e?t.clientHeight+o<t.scrollHeight:"X"===e?t.clientWidth+o<t.scrollWidth:void 0}function u(e,n){const r=t.getComputedStyle(e,null)["overflow"+n];return"auto"===r||"scroll"===r}function h(t){const e=c(t,"Y")&&u(t,"Y"),n=c(t,"X")&&u(t,"X");return e||n}function d(n,o,s){let l,c,u,h;const d=i();n===e.body?(l=t,c=t.scrollX||t.pageXOffset,u=t.scrollY||t.pageYOffset,h=r.scroll):(l=n,c=n.scrollLeft,u=n.scrollTop,h=a),function e(n){let r,o,s,a=(i()-n.startTime)/468;var l;l=a=a>1?1:a,r=.5*(1-Math.cos(Math.PI*l)),o=n.startX+(n.x-n.startX)*r,s=n.startY+(n.y-n.startY)*r,n.method.call(n.scrollable,o,s),o===n.x&&s===n.y||t.requestAnimationFrame(e.bind(t,n))}({scrollable:l,method:h,startTime:d,startX:c,startY:u,x:o,y:s})}t.scroll=t.scrollTo=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?d.call(t,e.body,void 0!==arguments[0].left?~~arguments[0].left:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:t.scrollY||t.pageYOffset):r.scroll.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:t.scrollY||t.pageYOffset))},t.scrollBy=function(){void 0!==arguments[0]&&(l(arguments[0])?r.scrollBy.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):d.call(t,e.body,~~arguments[0].left+(t.scrollX||t.pageXOffset),~~arguments[0].top+(t.scrollY||t.pageYOffset)))},n.prototype.scroll=n.prototype.scrollTo=function(){if(void 0===arguments[0])return;if(!0===l(arguments[0])){if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");return void r.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}const t=arguments[0].left,e=arguments[0].top;d.call(this,this,void 0===t?this.scrollLeft:~~t,void 0===e?this.scrollTop:~~e)},n.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):r.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},n.prototype.scrollIntoView=function(){if(!0===l(arguments[0]))return void r.scrollIntoView.call(this,void 0===arguments[0]||arguments[0]);const n=function(t){for(;t!==e.body&&!1===h(t);)t=t.parentNode||t.host;return t}(this),i=n.getBoundingClientRect(),o=this.getBoundingClientRect();n!==e.body?(d.call(this,n,n.scrollLeft+o.left-i.left,n.scrollTop+o.top-i.top),"fixed"!==t.getComputedStyle(n).position&&t.scrollBy({left:i.left,top:i.top,behavior:"smooth"})):t.scrollBy({left:o.left,top:o.top,behavior:"smooth"})}}class Pe{constructor(t=[],e){this.timeOffset=0,this.raf=null,this.actions=t,this.speed=e.speed,this.liveMode=e.liveMode}addAction(t){if(!this.actions.length||this.actions[this.actions.length-1].delay<=t.delay)return void this.actions.push(t);const e=this.findActionIndex(t);this.actions.splice(e,0,t)}start(){this.timeOffset=0;let t=performance.now();const e=()=>{const n=performance.now();for(this.timeOffset+=(n-t)*this.speed,t=n;this.actions.length;){const t=this.actions[0];if(!(this.timeOffset>=t.delay))break;this.actions.shift(),t.doAction()}(this.actions.length>0||this.liveMode)&&(this.raf=requestAnimationFrame(e))};this.raf=requestAnimationFrame(e)}clear(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0}setSpeed(t){this.speed=t}toggleLiveMode(t){this.liveMode=t}isActive(){return null!==this.raf}findActionIndex(t){let e=0,n=this.actions.length-1;for(;e<=n;){const r=Math.floor((e+n)/2);if(this.actions[r].delay<t.delay)e=r+1;else{if(!(this.actions[r].delay>t.delay))return r+1;n=r-1}}return e}}function Ve(t,e){if(t.type===It.IncrementalSnapshot&&t.data.source===wt.MouseMove&&t.data.positions&&t.data.positions.length){const n=t.data.positions[0].timeOffset,r=t.timestamp+n;return t.delay=r-e,r-e}return t.delay=t.timestamp-e,t.delay}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ge(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}!function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"}(Le||(Le={}));var Ye={type:"xstate.init"};function We(t){return void 0===t?[]:[].concat(t)}function Ze(t){return{type:"xstate.assign",assignment:t}}function je(t,e){return"string"==typeof(t="string"==typeof t&&e&&e[t]?e[t]:t)?{type:t}:"function"==typeof t?{type:t.name,exec:t}:t}function Ke(t){return function(e){return t===e}}function ze(t){return"string"==typeof t?{type:t}:t}function Qe(t,e){return{value:t,context:e,actions:[],changed:!1,matches:Ke(t)}}function Je(t,e,n){var r=e,i=!1;return[t.filter(function(t){if("xstate.assign"===t.type){i=!0;var e=Object.assign({},r);return"function"==typeof t.assignment?e=t.assignment(r,n):Object.keys(t.assignment).forEach(function(i){e[i]="function"==typeof t.assignment[i]?t.assignment[i](r,n):t.assignment[i]}),r=e,!1}return!0}),r,i]}function He(t,e){void 0===e&&(e={});var n=Ge(Je(We(t.states[t.initial].entry).map(function(t){return je(t,e.actions)}),t.context,Ye),2),r=n[0],i=n[1],o={config:t,_options:e,initialState:{value:t.initial,actions:r,context:i,matches:Ke(t.initial)},transition:function(e,n){var r,i,s="string"==typeof e?{value:e,context:t.context}:e,a=s.value,l=s.context,c=ze(n),u=t.states[a];if(u.on){var h=We(u.on[c.type]);try{for(var d=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(h),f=d.next();!f.done;f=d.next()){var p=f.value;if(void 0===p)return Qe(a,l);var g="string"==typeof p?{target:p}:p,m=g.target,y=g.actions,v=void 0===y?[]:y,C=g.cond,b=void 0===C?function(){return!0}:C,I=void 0===m,w=null!=m?m:a,A=t.states[w];if(b(l,c)){var E=Ge(Je((I?We(v):[].concat(u.exit,v,A.entry).filter(function(t){return t})).map(function(t){return je(t,o._options.actions)}),l,c),3),S=E[0],N=E[1],T=E[2],R=null!=m?m:a;return{value:R,context:N,actions:S,changed:m!==a||S.length>0||T,matches:Ke(R)}}}}catch(t){r={error:t}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}}return Qe(a,l)}};return o}var Xe=function(t,e){return t.actions.forEach(function(n){var r=n.exec;return r&&r(t.context,e)})};function qe(t){var e=t.initialState,n=Le.NotStarted,r=new Set,i={_machine:t,send:function(i){n===Le.Running&&(e=t.transition(e,i),Xe(e,ze(i)),r.forEach(function(t){return t(e)}))},subscribe:function(t){return r.add(t),t(e),{unsubscribe:function(){return r.delete(t)}}},start:function(r){if(r){var o="object"==typeof r?r:{context:t.config.context,value:r};e={value:o.value,actions:[],context:o.context,matches:Ke(o.value)}}return n=Le.Running,Xe(e,Ye),i},stop:function(){return n=Le.Stopped,r.clear(),i},get state(){return e},get status(){return n}};return i}const tn=new Map;function en(t,e){let n=tn.get(t);return n||(n=new Map,tn.set(t,n)),n.has(e)||n.set(e,[]),n.get(e)}function nn(t,e,n){return r=>Nt(this,void 0,void 0,function*(){if(r&&"object"==typeof r&&"rr_type"in r){if(n&&(n.isUnchanged=!1),"ImageBitmap"===r.rr_type&&"args"in r){const i=yield nn(t,e,n)(r.args);return yield createImageBitmap.apply(null,i)}if("index"in r){if(n||null===e)return r;const{rr_type:t,index:i}=r;return en(e,t)[i]}if("args"in r){const{rr_type:i,args:o}=r;return new(0,window[i])(...yield Promise.all(o.map(nn(t,e,n))))}if("base64"in r)return function(t){var e,n,r,i,o,s=.75*t.length,a=t.length,l=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var c=new ArrayBuffer(s),u=new Uint8Array(c);for(e=0;e<a;e+=4)n=Rt[t.charCodeAt(e)],r=Rt[t.charCodeAt(e+1)],i=Rt[t.charCodeAt(e+2)],o=Rt[t.charCodeAt(e+3)],u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|i>>2,u[l++]=(3&i)<<6|63&o;return c}(r.base64);if("src"in r){const e=t.get(r.src);if(e)return e;{const e=new Image;return e.src=r.src,t.set(r.src,e),e}}if("data"in r&&"Blob"===r.rr_type){const i=yield Promise.all(r.data.map(nn(t,e,n)));return new Blob(i,{type:r.type})}}else if(Array.isArray(r))return yield Promise.all(r.map(nn(t,e,n)));return r})}const rn=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function on({mutation:t,target:e,type:n,imageMap:r,errorHandler:i}){return Nt(this,void 0,void 0,function*(){try{const i=function(t,e){try{return e===Et.WebGL?t.getContext("webgl")||t.getContext("experimental-webgl"):t.getContext("webgl2")}catch(t){return null}}(e,n);if(!i)return;if(t.setter)return void(i[t.property]=t.args[0]);const o=i[t.property],s=yield Promise.all(t.args.map(nn(r,i)));!function(t,e){if(!(null==e?void 0:e.constructor))return;const{name:n}=e.constructor;if(!rn.includes(n))return;const r=en(t,n);r.includes(e)||r.push(e)}(i,o.apply(i,s))}catch(e){i(t,e)}})}function sn({event:t,mutation:e,target:n,imageMap:r,errorHandler:i}){return Nt(this,void 0,void 0,function*(){try{const i=n.getContext("2d");if(e.setter)return void(i[e.property]=e.args[0]);const o=i[e.property];if("drawImage"===e.property&&"string"==typeof e.args[0])r.get(t),o.apply(i,e.args);else{const t=yield Promise.all(e.args.map(nn(r,i)));o.apply(i,t)}}catch(t){i(e,t)}})}function an({event:t,mutation:e,target:n,imageMap:r,canvasEventMap:i,errorHandler:o}){return Nt(this,void 0,void 0,function*(){try{const s=i.get(t)||e,a="commands"in s?s.commands:[s];if([Et.WebGL,Et.WebGL2].includes(e.type)){for(let t=0;t<a.length;t++){yield on({mutation:a[t],type:e.type,target:n,imageMap:r,errorHandler:o})}return}for(let e=0;e<a.length;e++){const i=a[e];yield sn({event:t,mutation:i,target:n,imageMap:r,errorHandler:o})}}catch(t){o(e,t)}})}const ln=Be||Ue,cn={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function un(t){return t.type==It.IncrementalSnapshot&&(t.data.source==wt.TouchMove||t.data.source==wt.MouseInteraction&&t.data.type==At.TouchStart)}class hn{constructor(t,e){if(this.usingVirtualDom=!1,this.virtualDom=new qt,this.mouseTail=null,this.tailPositions=[],this.emitter=ln(),this.legacy_missingNodeRetryMap={},this.cache=ut(),this.imageMap=new Map,this.canvasEventMap=new Map,this.mirror=nt(),this.styleMirror=new bt,this.firstFullSnapshot=null,this.newDocumentQueue=[],this.mousePos=null,this.touchActive=null,this.lastSelectionData=null,this.constructedStyleMutations=[],this.adoptedStyleSheets=[],this.handleResize=(t=>{this.iframe.style.display="inherit";for(const e of[this.mouseTail,this.iframe])e&&(e.setAttribute("width",String(t.width)),e.setAttribute("height",String(t.height)))}),this.applyEventsSynchronously=(t=>{for(const e of t){switch(e.type){case It.DomContentLoaded:case It.Load:case It.Custom:continue;case It.FullSnapshot:case It.Meta:case It.Plugin:case It.IncrementalSnapshot:}this.getCastFn(e,!0)()}!0===this.touchActive?this.mouse.classList.add("touch-active"):!1===this.touchActive&&this.mouse.classList.remove("touch-active"),this.touchActive=null}),this.getCastFn=((t,e=!1)=>{let n;switch(t.type){case It.DomContentLoaded:case It.Load:break;case It.Custom:n=(()=>{this.emitter.emit(St.CustomEvent,t)});break;case It.Meta:n=(()=>this.emitter.emit(St.Resize,{width:t.data.width,height:t.data.height}));break;case It.FullSnapshot:n=(()=>{var n;if(this.firstFullSnapshot){if(this.firstFullSnapshot===t)return void(this.firstFullSnapshot=!0)}else this.firstFullSnapshot=!0;this.rebuildFullSnapshot(t,e),null===(n=this.iframe.contentWindow)||void 0===n||n.scrollTo(t.data.initialOffset),this.styleMirror.reset()});break;case It.IncrementalSnapshot:n=(()=>{if(this.applyIncremental(t,e),!e&&(t===this.nextUserInteractionEvent&&(this.nextUserInteractionEvent=null,this.backToNormal()),this.config.skipInactive&&!this.nextUserInteractionEvent)){for(const e of this.service.state.context.events)if(!(e.timestamp<=t.timestamp)&&this.isUserInteraction(e)){e.delay-t.delay>1e4*this.speedService.state.context.timer.speed&&(this.nextUserInteractionEvent=e);break}if(this.nextUserInteractionEvent){const e=this.nextUserInteractionEvent.delay-t.delay,n={speed:Math.min(Math.round(e/5e3),this.config.maxSpeed)};this.speedService.send({type:"FAST_FORWARD",payload:n}),this.emitter.emit(St.SkipStart,n)}}})}return()=>{n&&n();for(const n of this.config.plugins||[])n.handler&&n.handler(t,e,{replayer:this});this.service.send({type:"CAST_EVENT",payload:{event:t}});const r=this.service.state.context.events.length-1;if(t===this.service.state.context.events[r]){const e=()=>{r<this.service.state.context.events.length-1||(this.backToNormal(),this.service.send("END"),this.emitter.emit(St.Finish))};t.type===It.IncrementalSnapshot&&t.data.source===wt.MouseMove&&t.data.positions.length?setTimeout(()=>{e()},Math.max(0,50-t.data.positions[0].timeOffset)):e()}this.emitter.emit(St.EventCast,t)}}),!(null==e?void 0:e.liveMode)&&t.length<2)throw new Error("Replayer need at least 2 events.");const n={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:cn,useVirtualDom:!0};this.config=Object.assign({},n,e),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(St.Resize,this.handleResize),this.setupDom();for(const t of this.config.plugins||[])t.getMirror&&t.getMirror({nodeMirror:this.mirror});this.emitter.on(St.Flush,()=>{if(this.usingVirtualDom){const t={mirror:this.mirror,applyCanvas:(t,e,n)=>{an({event:t,mutation:e,target:n,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})},applyInput:this.applyInput.bind(this),applyScroll:this.applyScroll.bind(this),applyStyleSheetMutation:(t,e)=>{t.source===wt.StyleSheetRule?this.applyStyleSheetRule(t,e):t.source===wt.StyleDeclaration&&this.applyStyleDeclaration(t,e)}};if(this.iframe.contentDocument&&Jt(this.iframe.contentDocument,this.virtualDom,t,this.virtualDom.mirror),this.virtualDom.destroyTree(),this.usingVirtualDom=!1,Object.keys(this.legacy_missingNodeRetryMap).length)for(const e in this.legacy_missingNodeRetryMap)try{const n=this.legacy_missingNodeRetryMap[e],r=Xt(n.node,this.mirror,this.virtualDom.mirror);Jt(r,n.node,t,this.virtualDom.mirror),n.node=r}catch(t){this.config.showWarning&&console.warn(t)}this.constructedStyleMutations.forEach(t=>{this.applyStyleSheetMutation(t)}),this.constructedStyleMutations=[],this.adoptedStyleSheets.forEach(t=>{this.applyAdoptedStyleSheet(t)}),this.adoptedStyleSheets=[]}this.mousePos&&(this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null),this.lastSelectionData&&(this.applySelection(this.lastSelectionData),this.lastSelectionData=null)}),this.emitter.on(St.PlayBack,()=>{this.firstFullSnapshot=null,this.mirror.reset(),this.styleMirror.reset()});const r=new Pe([],{speed:this.config.speed,liveMode:this.config.liveMode});this.service=function(t,{getCastFn:e,applyEventsSynchronously:n,emitter:r}){return qe(He({id:"player",context:t,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:Ze({lastPlayedEvent:(t,e)=>"CAST_EVENT"===e.type?e.payload.event:t.lastPlayedEvent}),recordTimeOffset:Ze((t,e)=>{let n=t.timeOffset;return"payload"in e&&"timeOffset"in e.payload&&(n=e.payload.timeOffset),Object.assign(Object.assign({},t),{timeOffset:n,baselineTime:t.events[0].timestamp+n})}),play(t){var i;const{timer:o,events:s,baselineTime:a,lastPlayedEvent:l}=t;o.clear();for(const t of s)Ve(t,a);const c=function(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.type===It.Meta&&r.timestamp<=e)return t.slice(n)}return t}(s,a);let u=null==l?void 0:l.timestamp;(null==l?void 0:l.type)===It.IncrementalSnapshot&&l.data.source===wt.MouseMove&&(u=l.timestamp+(null===(i=l.data.positions[0])||void 0===i?void 0:i.timeOffset)),a<(u||0)&&r.emit(St.PlayBack);const h=new Array;for(const t of c)if(!(u&&u<a&&(t.timestamp<=u||t===l)))if(t.timestamp<a)h.push(t);else{const n=e(t,!1);o.addAction({doAction:()=>{n()},delay:t.delay})}n(h),r.emit(St.Flush),o.start()},pause(t){t.timer.clear()},resetLastPlayedEvent:Ze(t=>Object.assign(Object.assign({},t),{lastPlayedEvent:null})),startLive:Ze({baselineTime:(t,e)=>(t.timer.toggleLiveMode(!0),t.timer.start(),"TO_LIVE"===e.type&&e.payload.baselineTime?e.payload.baselineTime:Date.now())}),addEvent:Ze((t,n)=>{const{baselineTime:r,timer:i,events:o}=t;if("ADD_EVENT"===n.type){const{event:t}=n.payload;Ve(t,r);let s=o.length-1;if(!o[s]||o[s].timestamp<=t.timestamp)o.push(t);else{let e=-1,n=0;for(;n<=s;){const e=Math.floor((n+s)/2);o[e].timestamp<=t.timestamp?n=e+1:s=e-1}-1===e&&(e=n),o.splice(e,0,t)}const a=t.timestamp<r,l=e(t,a);a?l():i.isActive()&&i.addAction({doAction:()=>{l()},delay:t.delay})}return Object.assign(Object.assign({},t),{events:o})})}}))}({events:t.map(t=>e&&e.unpackFn?e.unpackFn(t):t).sort((t,e)=>t.timestamp-e.timestamp),timer:r,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe(t=>{this.emitter.emit(St.StateChange,{player:t})}),this.speedService=qe(He({id:"speed",context:{normalSpeed:-1,timer:r},initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:(t,e)=>{"payload"in e&&t.timer.setSpeed(e.payload.speed)},recordSpeed:Ze({normalSpeed:t=>t.timer.speed}),restoreSpeed:t=>{t.timer.setSpeed(t.normalSpeed)}}})),this.speedService.start(),this.speedService.subscribe(t=>{this.emitter.emit(St.StateChange,{speed:t})});const i=this.service.state.context.events.find(t=>t.type===It.Meta),o=this.service.state.context.events.find(t=>t.type===It.FullSnapshot);if(i){const{width:t,height:e}=i.data;setTimeout(()=>{this.emitter.emit(St.Resize,{width:t,height:e})},0)}o&&setTimeout(()=>{var t;this.firstFullSnapshot||(this.firstFullSnapshot=o,this.rebuildFullSnapshot(o),null===(t=this.iframe.contentWindow)||void 0===t||t.scrollTo(o.data.initialOffset))},1),this.service.state.context.events.find(un)&&this.mouse.classList.add("touch-device")}get timer(){return this.service.state.context.timer}on(t,e){return this.emitter.on(t,e),this}off(t,e){return this.emitter.off(t,e),this}setConfig(t){Object.keys(t).forEach(e=>{t[e],this.config[e]=t[e]}),this.config.skipInactive||this.backToNormal(),void 0!==t.speed&&this.speedService.send({type:"SET_SPEED",payload:{speed:t.speed}}),void 0!==t.mouseTail&&(!1===t.mouseTail?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))}getMetaData(){const t=this.service.state.context.events[0],e=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:t.timestamp,endTime:e.timestamp,totalTime:e.timestamp-t.timestamp}}getCurrentTime(){return this.timer.timeOffset+this.getTimeOffset()}getTimeOffset(){const{baselineTime:t,events:e}=this.service.state.context;return t-e[0].timestamp}getMirror(){return this.mirror}play(t=0){var e,n;this.service.state.matches("paused")||this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:t}}),null===(n=null===(e=this.iframe.contentDocument)||void 0===e?void 0:e.getElementsByTagName("html")[0])||void 0===n||n.classList.remove("rrweb-paused"),this.emitter.emit(St.Start)}pause(t){var e,n;void 0===t&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),"number"==typeof t&&(this.play(t),this.service.send({type:"PAUSE"})),null===(n=null===(e=this.iframe.contentDocument)||void 0===e?void 0:e.getElementsByTagName("html")[0])||void 0===n||n.classList.add("rrweb-paused"),this.emitter.emit(St.Pause)}resume(t=0){console.warn("The 'resume' was deprecated in 1.0. Please use 'play' method which has the same interface."),this.play(t),this.emitter.emit(St.Resume)}destroy(){this.pause(),this.config.root.removeChild(this.wrapper),this.emitter.emit(St.Destroy)}startLive(t){this.service.send({type:"TO_LIVE",payload:{baselineTime:t}})}addEvent(t){const e=this.config.unpackFn?this.config.unpackFn(t):t;un(e)&&this.mouse.classList.add("touch-device"),Promise.resolve().then(()=>this.service.send({type:"ADD_EVENT",payload:{event:e}}))}enableInteract(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"}disableInteract(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"}resetCache(){this.cache=ut()}setupDom(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),!1!==this.config.mouseTail&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");const t=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&t.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",t.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&($e(this.iframe.contentWindow,this.iframe.contentDocument),function(t=window){"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=((...t)=>{let e=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do{if(this===e)return!0}while(e=e&&e.parentNode);return!1}))}(this.iframe.contentWindow))}rebuildFullSnapshot(t,e=!1){if(!this.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&console.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};const n=[],r=(t,e)=>{this.collectIframeAndAttachDocument(n,t);for(const n of this.config.plugins||[])n.onBuild&&n.onBuild(t,{id:e,replayer:this})};(function(t,e){var n=e.doc,r=e.onVisit,i=e.hackCss,o=void 0===i||i,s=e.afterAppend,a=e.cache,l=e.mirror,c=void 0===l?new et:l,u=ht(t,{doc:n,mirror:c,skipChild:!1,hackCss:o,afterAppend:s,cache:a});(function(t,e){for(var n=0,r=t.getIds();n<r.length;n++){var i=r[n];t.has(i)&&e(t.getNode(i))}})(c,function(t){r&&r(t),function(t,e){var n=c.getMeta(t);if((null==n?void 0:n.type)===q.Element){var r=t;for(var i in n.attributes)if(Object.prototype.hasOwnProperty.call(n.attributes,i)&&i.startsWith("rr_")){var o=n.attributes[i];"rr_scrollLeft"===i&&(r.scrollLeft=o),"rr_scrollTop"===i&&(r.scrollTop=o)}}}(t)})})(t.data.node,{doc:this.iframe.contentDocument,afterAppend:r,cache:this.cache,mirror:this.mirror}),r(this.iframe.contentDocument,t.data.node.id);for(const{mutationInQueue:t,builtNode:e}of n)this.attachDocumentToIframe(t,e),this.newDocumentQueue=this.newDocumentQueue.filter(e=>e!==t);const{documentElement:i,head:o}=this.iframe.contentDocument;this.insertStyleRules(i,o),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(St.FullsnapshotRebuilded,t),e||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()}insertStyleRules(t,e){var n;const r=(i=this.config.blockClass,[`.${i} { background: currentColor }`,"noscript { display: none !important; }"]).concat(this.config.insertStyleRules);var i;if(this.config.pauseAnimation&&r.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }"),this.usingVirtualDom){const n=this.virtualDom.createElement("style");this.virtualDom.mirror.add(n,he(n,this.virtualDom.unserializedId)),t.insertBefore(n,e),n.rules.push({source:wt.StyleSheetRule,adds:r.map((t,e)=>({rule:t,index:e}))})}else{const i=document.createElement("style");t.insertBefore(i,e);for(let t=0;t<r.length;t++)null===(n=i.sheet)||void 0===n||n.insertRule(r[t],t)}}attachDocumentToIframe(t,e){const n=this.usingVirtualDom?this.virtualDom.mirror:this.mirror,r=[],i=(t,i)=>{this.collectIframeAndAttachDocument(r,t);const o=n.getMeta(t);if((null==o?void 0:o.type)===q.Element&&"HTML"===(null==o?void 0:o.tagName.toUpperCase())){const{documentElement:t,head:n}=e.contentDocument;this.insertStyleRules(t,n)}for(const e of this.config.plugins||[])e.onBuild&&e.onBuild(t,{id:i,replayer:this})};ht(t.node,{doc:e.contentDocument,mirror:n,hackCss:!0,skipChild:!1,afterAppend:i,cache:this.cache}),i(e.contentDocument,t.node.id);for(const{mutationInQueue:t,builtNode:e}of r)this.attachDocumentToIframe(t,e),this.newDocumentQueue=this.newDocumentQueue.filter(e=>e!==t)}collectIframeAndAttachDocument(t,e){if(mt(e,this.mirror)){const n=this.newDocumentQueue.find(t=>t.parentId===this.mirror.getId(e));n&&t.push({mutationInQueue:n,builtNode:e})}}waitForStylesheetLoad(){var t;const e=null===(t=this.iframe.contentDocument)||void 0===t?void 0:t.head;if(e){const t=new Set;let n,r=this.service.state;const i=()=>{r=this.service.state};this.emitter.on(St.Start,i),this.emitter.on(St.Pause,i);const o=()=>{this.emitter.off(St.Start,i),this.emitter.off(St.Pause,i)};e.querySelectorAll('link[rel="stylesheet"]').forEach(e=>{e.sheet||(t.add(e),e.addEventListener("load",()=>{t.delete(e),0===t.size&&-1!==n&&(r.matches("playing")&&this.play(this.getCurrentTime()),this.emitter.emit(St.LoadStylesheetEnd),n&&clearTimeout(n),o())}))}),t.size>0&&(this.service.send({type:"PAUSE"}),this.emitter.emit(St.LoadStylesheetStart),n=setTimeout(()=>{r.matches("playing")&&this.play(this.getCurrentTime()),n=-1,o()},this.config.loadTimeout))}}preloadAllImages(){return Nt(this,void 0,void 0,function*(){this.service.state;const t=()=>{this.service.state};this.emitter.on(St.Start,t),this.emitter.on(St.Pause,t);const e=[];for(const t of this.service.state.context.events)t.type===It.IncrementalSnapshot&&t.data.source===wt.CanvasMutation&&(e.push(this.deserializeAndPreloadCanvasEvents(t.data,t)),("commands"in t.data?t.data.commands:[t.data]).forEach(e=>{this.preloadImages(e,t)}));return Promise.all(e)})}preloadImages(t,e){if("drawImage"===t.property&&"string"==typeof t.args[0]&&!this.imageMap.has(e)){const e=document.createElement("canvas"),n=e.getContext("2d"),r=null==n?void 0:n.createImageData(e.width,e.height);null==r||r.data,JSON.parse(t.args[0]),null==n||n.putImageData(r,0,0)}}deserializeAndPreloadCanvasEvents(t,e){return Nt(this,void 0,void 0,function*(){if(!this.canvasEventMap.has(e)){const n={isUnchanged:!0};if("commands"in t){const r=yield Promise.all(t.commands.map(t=>Nt(this,void 0,void 0,function*(){const e=yield Promise.all(t.args.map(nn(this.imageMap,null,n)));return Object.assign(Object.assign({},t),{args:e})})));!1===n.isUnchanged&&this.canvasEventMap.set(e,Object.assign(Object.assign({},t),{commands:r}))}else{const r=yield Promise.all(t.args.map(nn(this.imageMap,null,n)));!1===n.isUnchanged&&this.canvasEventMap.set(e,Object.assign(Object.assign({},t),{args:r}))}}})}applyIncremental(t,e){var n,r,i;const{data:o}=t;switch(o.source){case wt.Mutation:try{this.applyMutation(o,e)}catch(t){this.warn(`Exception in mutation ${t.message||t}`,o)}break;case wt.Drag:case wt.TouchMove:case wt.MouseMove:if(e){const t=o.positions[o.positions.length-1];this.mousePos={x:t.x,y:t.y,id:t.id,debugData:o}}else o.positions.forEach(n=>{const r={doAction:()=>{this.moveAndHover(n.x,n.y,n.id,e,o)},delay:n.timeOffset+t.timestamp-this.service.state.context.baselineTime};this.timer.addAction(r)}),this.timer.addAction({doAction(){},delay:t.delay-(null===(n=o.positions[0])||void 0===n?void 0:n.timeOffset)});break;case wt.MouseInteraction:{if(-1===o.id||e)break;const t=new Event(At[o.type].toLowerCase()),n=this.mirror.getNode(o.id);if(!n)return this.debugNodeNotFound(o,o.id);this.emitter.emit(St.MouseInteraction,{type:o.type,target:n});const{triggerFocus:r}=this.config;switch(o.type){case At.Blur:"blur"in n&&n.blur();break;case At.Focus:r&&n.focus&&n.focus({preventScroll:!0});break;case At.Click:case At.TouchStart:case At.TouchEnd:e?(o.type===At.TouchStart?this.touchActive=!0:o.type===At.TouchEnd&&(this.touchActive=!1),this.mousePos={x:o.x,y:o.y,id:o.id,debugData:o}):(o.type===At.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(o.x,o.y,o.id,e,o),o.type===At.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):o.type===At.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):o.type===At.TouchEnd&&this.mouse.classList.remove("touch-active"));break;case At.TouchCancel:e?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:n.dispatchEvent(t)}break}case wt.Scroll:if(-1===o.id)break;if(this.usingVirtualDom){const t=this.virtualDom.mirror.getNode(o.id);if(!t)return this.debugNodeNotFound(o,o.id);t.scrollData=o;break}this.applyScroll(o,e);break;case wt.ViewportResize:this.emitter.emit(St.Resize,{width:o.width,height:o.height});break;case wt.Input:if(-1===o.id)break;if(this.usingVirtualDom){const t=this.virtualDom.mirror.getNode(o.id);if(!t)return this.debugNodeNotFound(o,o.id);t.inputData=o;break}this.applyInput(o);break;case wt.MediaInteraction:{const e=this.usingVirtualDom?this.virtualDom.mirror.getNode(o.id):this.mirror.getNode(o.id);if(!e)return this.debugNodeNotFound(o,o.id);const n=e;try{o.currentTime&&(n.currentTime=o.currentTime),o.volume&&(n.volume=o.volume),o.muted&&(n.muted=o.muted),1===o.type&&n.pause(),0===o.type&&n.play(),4===o.type&&(n.playbackRate=o.playbackRate)}catch(t){this.config.showWarning&&console.warn(`Failed to replay media interactions: ${t.message||t}`)}break}case wt.StyleSheetRule:case wt.StyleDeclaration:this.usingVirtualDom?o.styleId?this.constructedStyleMutations.push(o):o.id&&(null===(r=this.virtualDom.mirror.getNode(o.id))||void 0===r||r.rules.push(o)):this.applyStyleSheetMutation(o);break;case wt.CanvasMutation:if(!this.config.UNSAFE_replayCanvas)return;if(this.usingVirtualDom){const e=this.virtualDom.mirror.getNode(o.id);if(!e)return this.debugNodeNotFound(o,o.id);e.canvasMutations.push({event:t,mutation:o})}else{const e=this.mirror.getNode(o.id);if(!e)return this.debugNodeNotFound(o,o.id);an({event:t,mutation:o,target:e,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})}break;case wt.Font:try{const e=new FontFace(o.family,o.buffer?new Uint8Array(JSON.parse(o.fontSource)):o.fontSource,o.descriptors);null===(i=this.iframe.contentDocument)||void 0===i||i.fonts.add(e)}catch(t){this.config.showWarning&&console.warn(t)}break;case wt.Selection:if(e){this.lastSelectionData=o;break}this.applySelection(o);break;case wt.AdoptedStyleSheet:this.usingVirtualDom?this.adoptedStyleSheets.push(o):this.applyAdoptedStyleSheet(o)}}applyMutation(t,e){if(this.config.useVirtualDom&&!this.usingVirtualDom&&e&&(this.usingVirtualDom=!0,function(t,e=new kt,n=new qt){(function t(r,i){const o=ce(r,n,e,i);if(null!==o)if("IFRAME"!==(null==i?void 0:i.nodeName)&&r.nodeType!==Kt.DOCUMENT_FRAGMENT_NODE&&(null==i||i.appendChild(o),o.parentNode=i,o.parentElement=i),"IFRAME"===r.nodeName){const e=r.contentDocument;e&&t(e,o)}else r.nodeType!==Kt.DOCUMENT_NODE&&r.nodeType!==Kt.ELEMENT_NODE&&r.nodeType!==Kt.DOCUMENT_FRAGMENT_NODE||(r.nodeType===Kt.ELEMENT_NODE&&r.shadowRoot&&t(r.shadowRoot,o),r.childNodes.forEach(e=>t(e,o)))})(t,null)}(this.iframe.contentDocument,this.mirror,this.virtualDom),Object.keys(this.legacy_missingNodeRetryMap).length))for(const e in this.legacy_missingNodeRetryMap)try{const n=this.legacy_missingNodeRetryMap[e],r=ce(n.node,this.virtualDom,this.mirror);r&&(n.node=r)}catch(t){this.config.showWarning&&console.warn(t)}const n=this.usingVirtualDom?this.virtualDom.mirror:this.mirror;t.removes.forEach(e=>{var r;const i=n.getNode(e.id);if(!i){if(t.removes.find(t=>t.id===e.parentId))return;return this.warnNodeNotFound(t,e.id)}let o=n.getNode(e.parentId);if(!o)return this.warnNodeNotFound(t,e.parentId);if(e.isShadow&&yt(o)&&(o=o.shadowRoot),n.removeNodeFromMap(i),o)try{o.removeChild(i),this.usingVirtualDom&&"#text"===i.nodeName&&"STYLE"===o.nodeName&&(null===(r=o.rules)||void 0===r?void 0:r.length)>0&&(o.rules=[])}catch(e){if(!(e instanceof DOMException))throw e;this.warn("parent could not remove child in mutation",o,i,t)}});const r=Object.assign({},this.legacy_missingNodeRetryMap),i=[],o=t=>{var e;if(!this.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");let o=n.getNode(t.parentId);if(!o)return t.node.type===q.Document?this.newDocumentQueue.push(t):i.push(t);t.node.isShadow&&(yt(o)||o.attachShadow({mode:"open"}),o=o.shadowRoot);let s=null,a=null;if(t.previousId&&(s=n.getNode(t.previousId)),t.nextId&&(a=n.getNode(t.nextId)),(t=>{let e=null;return t.nextId&&(e=n.getNode(t.nextId)),null!==t.nextId&&void 0!==t.nextId&&-1!==t.nextId&&!e})(t))return i.push(t);if(t.node.rootId&&!n.getNode(t.node.rootId))return;const l=t.node.rootId?n.getNode(t.node.rootId):this.usingVirtualDom?this.virtualDom:this.iframe.contentDocument;if(mt(o,n))return void this.attachDocumentToIframe(t,o);const c=(t,e)=>{for(const n of this.config.plugins||[])n.onBuild&&n.onBuild(t,{id:e,replayer:this})},u=ht(t.node,{doc:l,mirror:n,skipChild:!0,hackCss:!0,cache:this.cache,afterAppend:c});if(-1===t.previousId||-1===t.nextId)return void(r[t.node.id]={node:u,mutation:t});const h=n.getMeta(o);if(h&&h.type===q.Element&&"textarea"===h.tagName&&t.node.type===q.Text){const t=Array.isArray(o.childNodes)?o.childNodes:Array.from(o.childNodes);for(const e of t)e.nodeType===o.TEXT_NODE&&o.removeChild(e)}if(s&&s.nextSibling&&s.nextSibling.parentNode)o.insertBefore(u,s.nextSibling);else if(a&&a.parentNode)o.contains(a)?o.insertBefore(u,a):o.insertBefore(u,null);else{if(o===l)for(;l.firstChild;)l.removeChild(l.firstChild);o.appendChild(u)}if(c(u,t.node.id),this.usingVirtualDom&&"#text"===u.nodeName&&"STYLE"===o.nodeName&&(null===(e=o.rules)||void 0===e?void 0:e.length)>0&&(o.rules=[]),mt(u,this.mirror)){const t=this.mirror.getId(u),e=this.newDocumentQueue.find(e=>e.parentId===t);e&&(this.attachDocumentToIframe(e,u),this.newDocumentQueue=this.newDocumentQueue.filter(t=>t!==e))}(t.previousId||t.nextId)&&this.legacy_resolveMissingNode(r,o,u,t)};t.adds.forEach(t=>{o(t)});const s=Date.now();for(;i.length;){const t=pt(i);if(i.length=0,Date.now()-s>500){this.warn("Timeout in the loop, please check the resolve tree data:",t);break}for(const e of t)n.getNode(e.value.parentId)?gt(e,t=>{o(t)}):this.debug("Drop resolve tree since there is no parent for the root node.",e)}Object.keys(r).length&&Object.assign(this.legacy_missingNodeRetryMap,r),function(t){const e=new Set,n=[];for(let r=t.length;r--;){const i=t[r];e.has(i.id)||(n.push(i),e.add(i.id))}return n}(t.texts).forEach(e=>{var r;const i=n.getNode(e.id);if(!i){if(t.removes.find(t=>t.id===e.id))return;return this.warnNodeNotFound(t,e.id)}if(i.textContent=e.value,this.usingVirtualDom){const t=i.parentNode;(null===(r=null==t?void 0:t.rules)||void 0===r?void 0:r.length)>0&&(t.rules=[])}}),t.attributes.forEach(e=>{const r=n.getNode(e.id);if(!r){if(t.removes.find(t=>t.id===e.id))return;return this.warnNodeNotFound(t,e.id)}for(const t in e.attributes)if("string"==typeof t){const i=e.attributes[t];if(null===i)r.removeAttribute(t);else if("string"==typeof i)try{if("_cssText"===t&&("LINK"===r.nodeName||"STYLE"===r.nodeName))try{const t=n.getMeta(r);Object.assign(t.attributes,e.attributes);const i=ht(t,{doc:r.ownerDocument,mirror:n,skipChild:!0,hackCss:!0,cache:this.cache}),o=r.nextSibling,s=r.parentNode;if(i&&s){s.removeChild(r),s.insertBefore(i,o),n.replace(e.id,i);break}}catch(t){}r.setAttribute(t,i)}catch(t){this.config.showWarning&&console.warn("An error occurred may due to the checkout feature.",t)}else if("style"===t){const t=i,e=r;for(const n in t)if(!1===t[n])e.style.removeProperty(n);else if(t[n]instanceof Array){const r=t[n];e.style.setProperty(n,r[0],r[1])}else{const r=t[n];e.style.setProperty(n,r)}}}})}applyScroll(t,e){var n,r;const i=this.mirror.getNode(t.id);if(!i)return this.debugNodeNotFound(t,t.id);const o=this.mirror.getMeta(i);if(i===this.iframe.contentDocument)null===(n=this.iframe.contentWindow)||void 0===n||n.scrollTo({top:t.y,left:t.x,behavior:e?"auto":"smooth"});else if((null==o?void 0:o.type)===q.Document)null===(r=i.defaultView)||void 0===r||r.scrollTo({top:t.y,left:t.x,behavior:e?"auto":"smooth"});else try{i.scrollTo({top:t.y,left:t.x,behavior:e?"auto":"smooth"})}catch(t){}}applyInput(t){const e=this.mirror.getNode(t.id);if(!e)return this.debugNodeNotFound(t,t.id);try{e.checked=t.isChecked,e.value=t.text}catch(t){}}applySelection(t){try{const e=new Set,n=t.ranges.map(({start:t,startOffset:n,end:r,endOffset:i})=>{const o=this.mirror.getNode(t),s=this.mirror.getNode(r);if(!o||!s)return;const a=new Range;a.setStart(o,n),a.setEnd(s,i);const l=o.ownerDocument,c=null==l?void 0:l.getSelection();return c&&e.add(c),{range:a,selection:c}});e.forEach(t=>t.removeAllRanges()),n.forEach(t=>{var e;return t&&(null===(e=t.selection)||void 0===e?void 0:e.addRange(t.range))})}catch(t){}}applyStyleSheetMutation(t){var e;let n=null;t.styleId?n=this.styleMirror.getStyle(t.styleId):t.id&&(n=(null===(e=this.mirror.getNode(t.id))||void 0===e?void 0:e.sheet)||null),n&&(t.source===wt.StyleSheetRule?this.applyStyleSheetRule(t,n):t.source===wt.StyleDeclaration&&this.applyStyleDeclaration(t,n))}applyStyleSheetRule(t,e){var n,r,i,o;if(null===(n=t.adds)||void 0===n||n.forEach(({rule:t,index:n})=>{try{if(Array.isArray(n)){const{positions:r,index:i}=Ct(n);vt(e.cssRules,r).insertRule(t,i)}else{const r=void 0===n?void 0:Math.min(n,e.cssRules.length);null==e||e.insertRule(t,r)}}catch(t){}}),null===(r=t.removes)||void 0===r||r.forEach(({index:t})=>{try{if(Array.isArray(t)){const{positions:n,index:r}=Ct(t);vt(e.cssRules,n).deleteRule(r||0)}else null==e||e.deleteRule(t)}catch(t){}}),t.replace)try{null===(i=e.replace)||void 0===i||i.call(e,t.replace)}catch(t){}if(t.replaceSync)try{null===(o=e.replaceSync)||void 0===o||o.call(e,t.replaceSync)}catch(t){}}applyStyleDeclaration(t,e){t.set&&vt(e.rules,t.index).style.setProperty(t.set.property,t.set.value,t.set.priority),t.remove&&vt(e.rules,t.index).style.removeProperty(t.remove.property)}applyAdoptedStyleSheet(t){var e;const n=this.mirror.getNode(t.id);if(!n)return;null===(e=t.styles)||void 0===e||e.forEach(t=>{var e;let r=null,i=null;if(yt(n)?i=(null===(e=n.ownerDocument)||void 0===e?void 0:e.defaultView)||null:"#document"===n.nodeName&&(i=n.defaultView),i)try{r=new i.CSSStyleSheet,this.styleMirror.add(r,t.styleId),this.applyStyleSheetRule({source:wt.StyleSheetRule,adds:t.rules},r)}catch(t){}});let r=0;const i=(t,e)=>{const n=e.map(t=>this.styleMirror.getStyle(t)).filter(t=>null!==t);yt(t)?t.shadowRoot.adoptedStyleSheets=n:"#document"===t.nodeName&&(t.adoptedStyleSheets=n),n.length!==e.length&&r<10&&(setTimeout(()=>i(t,e),0+100*r),r++)};i(n,t.styleIds)}legacy_resolveMissingNode(t,e,n,r){const{previousId:i,nextId:o}=r,s=i&&t[i],a=o&&t[o];if(s){const{node:r,mutation:i}=s;e.insertBefore(r,n),delete t[i.node.id],delete this.legacy_missingNodeRetryMap[i.node.id],(i.previousId||i.nextId)&&this.legacy_resolveMissingNode(t,e,r,i)}if(a){const{node:r,mutation:i}=a;e.insertBefore(r,n.nextSibling),delete t[i.node.id],delete this.legacy_missingNodeRetryMap[i.node.id],(i.previousId||i.nextId)&&this.legacy_resolveMissingNode(t,e,r,i)}}moveAndHover(t,e,n,r,i){const o=this.mirror.getNode(n);if(!o)return this.debugNodeNotFound(i,n);const s=function t(e,n){var r,i;const o=null===(i=null===(r=e.ownerDocument)||void 0===r?void 0:r.defaultView)||void 0===i?void 0:i.frameElement;if(!o||o===n)return{x:0,y:0,relativeScale:1,absoluteScale:1};const s=o.getBoundingClientRect(),a=t(o,n),l=s.height/o.clientHeight;return{x:s.x*a.relativeScale+a.x,y:s.y*a.relativeScale+a.y,relativeScale:l,absoluteScale:a.absoluteScale*l}}(o,this.iframe),a=t*s.absoluteScale+s.x,l=e*s.absoluteScale+s.y;this.mouse.style.left=`${a}px`,this.mouse.style.top=`${l}px`,r||this.drawMouseTail({x:a,y:l}),this.hoverElements(o)}drawMouseTail(t){if(!this.mouseTail)return;const{lineCap:e,lineWidth:n,strokeStyle:r,duration:i}=!0===this.config.mouseTail?cn:Object.assign({},cn,this.config.mouseTail),o=()=>{if(!this.mouseTail)return;const t=this.mouseTail.getContext("2d");t&&this.tailPositions.length&&(t.clearRect(0,0,this.mouseTail.width,this.mouseTail.height),t.beginPath(),t.lineWidth=n,t.lineCap=e,t.strokeStyle=r,t.moveTo(this.tailPositions[0].x,this.tailPositions[0].y),this.tailPositions.forEach(e=>t.lineTo(e.x,e.y)),t.stroke())};this.tailPositions.push(t),o(),setTimeout(()=>{this.tailPositions=this.tailPositions.filter(e=>e!==t),o()},i/this.speedService.state.context.timer.speed)}hoverElements(t){var e;null===(e=this.iframe.contentDocument)||void 0===e||e.querySelectorAll(".\\:hover").forEach(t=>{t.classList.remove(":hover")});let n=t;for(;n;)n.classList&&n.classList.add(":hover"),n=n.parentElement}isUserInteraction(t){return t.type===It.IncrementalSnapshot&&t.data.source>wt.Mutation&&t.data.source<=wt.Input}backToNormal(){this.nextUserInteractionEvent=null,this.speedService.state.matches("normal")||(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(St.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))}warnNodeNotFound(t,e){this.warn(`Node with id '${e}' not found. `,t)}warnCanvasMutationFailed(t,e){this.warn("Has error on canvas update",e,"canvas mutation:",t)}debugNodeNotFound(t,e){this.debug("[replayer]",`Node with id '${e}' not found. `,t)}warn(...t){this.config.showWarning&&console.warn("[replayer]",...t)}debug(...t){this.config.showDebug&&console.log("[replayer]",...t)}}function dn(t){let e="";return Object.keys(t).forEach(n=>{e+=`${n}: ${t[n]};`}),e}function fn(t,e=2){let n=String(t);const r=Math.pow(10,e-1);if(t<r)for(;String(r).length>n.length;)n=`0${t}`;return n}function pn(t){if(t<=0)return"00:00";const e=Math.floor(t/36e5);t%=36e5;const n=Math.floor(t/6e4);t%=6e4;const r=Math.floor(t/1e3);return e?`${fn(e)}:${fn(n)}:${fn(r)}`:`${fn(n)}:${fn(r)}`}function gn(){let t=!1;return["fullscreen","webkitIsFullScreen","mozFullScreen","msFullscreenElement"].forEach(e=>{e in document&&(t=t||Boolean(document[e]))}),t}function mn(t){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(t)]}function yn(t){return t.type===It.IncrementalSnapshot&&t.data.source>wt.Mutation&&t.data.source<=wt.Input}function vn(t){let e,n,r,i,s,a,l,c,u;return{c(){e=y("div"),n=y("input"),r=b(),i=y("label"),s=b(),a=y("span"),l=C(t[3]),w(n,"type","checkbox"),w(n,"id",t[2]),n.disabled=t[1],w(n,"class","svelte-9brlez"),w(i,"for",t[2]),w(i,"class","svelte-9brlez"),w(a,"class","label svelte-9brlez"),w(e,"class","switch svelte-9brlez"),S(e,"disabled",t[1])},m(o,h){p(o,e,h),f(e,n),n.checked=t[0],f(e,r),f(e,i),f(e,s),f(e,a),f(a,l),c||(u=I(n,"change",t[4]),c=!0)},p(t,[r]){4&r&&w(n,"id",t[2]),2&r&&(n.disabled=t[1]),1&r&&(n.checked=t[0]),4&r&&w(i,"for",t[2]),8&r&&A(l,t[3]),2&r&&S(e,"disabled",t[1])},i:o,o:o,d(t){t&&g(e),c=!1,u()}}}function Cn(t,e,n){let{disabled:r}=e,{checked:i}=e,{id:o}=e,{label:s}=e;return t.$$set=(t=>{"disabled"in t&&n(1,r=t.disabled),"checked"in t&&n(0,i=t.checked),"id"in t&&n(2,o=t.id),"label"in t&&n(3,s=t.label)}),[i,r,o,s,function(){i=this.checked,n(0,i)}]}class bn extends X{constructor(t){super(),H(this,t,Cn,vn,h,{disabled:1,checked:0,id:2,label:3})}}function In(t,e,n){const r=t.slice();return r[39]=e[n],r}function wn(t,e,n){const r=t.slice();return r[42]=e[n],r}function An(t,e,n){const r=t.slice();return r[45]=e[n],r}function En(t){let e,n,r,i,o,s,a,l,u,h,d,v,N,T,R,D,x,M,k,O,B,L,U,$,P,V,G=pn(t[6])+"",Y=pn(t[8].totalTime)+"",W=t[14],Z=[];for(let e=0;e<W.length;e+=1)Z[e]=Sn(An(t,W,e));let H=t[9],X=[];for(let e=0;e<H.length;e+=1)X[e]=Nn(wn(t,H,e));function q(t,e){return"playing"===t[7]?Rn:Tn}let tt=q(t),et=tt(t),nt=t[3],rt=[];for(let e=0;e<nt.length;e+=1)rt[e]=Dn(In(t,nt,e));function it(e){t[30](e)}let ot={id:"skip",disabled:"skipping"===t[10],label:"skip inactive"};return void 0!==t[0]&&(ot.checked=t[0]),O=new bn({props:ot}),_.push(()=>(function(t,e,n){const r=t.$$.props.checked;void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))})(O,0,it)),{c(){e=y("div"),n=y("div"),r=y("span"),i=C(G),o=b(),s=y("div"),a=y("div"),l=b();for(let t=0;t<Z.length;t+=1)Z[t].c();u=b();for(let t=0;t<X.length;t+=1)X[t].c();h=b(),d=y("div"),v=b(),N=y("span"),T=C(Y),R=b(),D=y("div"),x=y("button"),et.c(),M=b();for(let t=0;t<rt.length;t+=1)rt[t].c();k=b(),z(O.$$.fragment),L=b(),(U=y("button")).innerHTML='<svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M916 380c-26.4 0-48-21.6-48-48L868 223.2 613.6 477.6c-18.4\n            18.4-48.8 18.4-68 0-18.4-18.4-18.4-48.8 0-68L800 156 692 156c-26.4\n            0-48-21.6-48-48 0-26.4 21.6-48 48-48l224 0c26.4 0 48 21.6 48 48l0\n            224C964 358.4 942.4 380 916 380zM231.2 860l108.8 0c26.4 0 48 21.6 48\n            48s-21.6 48-48 48l-224 0c-26.4 0-48-21.6-48-48l0-224c0-26.4 21.6-48\n            48-48 26.4 0 48 21.6 48 48L164 792l253.6-253.6c18.4-18.4 48.8-18.4\n            68 0 18.4 18.4 18.4 48.8 0 68L231.2 860z" p-id="1286"></path></svg>',w(r,"class","rr-timeline__time svelte-19ke1iv"),w(a,"class","rr-progress__step svelte-19ke1iv"),E(a,"width",t[13]),w(d,"class","rr-progress__handler svelte-19ke1iv"),E(d,"left",t[13]),w(s,"class","rr-progress svelte-19ke1iv"),S(s,"disabled","skipping"===t[10]),w(N,"class","rr-timeline__time svelte-19ke1iv"),w(n,"class","rr-timeline svelte-19ke1iv"),w(x,"class","svelte-19ke1iv"),w(U,"class","svelte-19ke1iv"),w(D,"class","rr-controller__btns svelte-19ke1iv"),w(e,"class","rr-controller svelte-19ke1iv")},m(c,g){p(c,e,g),f(e,n),f(n,r),f(r,i),f(n,o),f(n,s),f(s,a),t[27](a),f(s,l);for(let t=0;t<Z.length;t+=1)Z[t].m(s,null);f(s,u);for(let t=0;t<X.length;t+=1)X[t].m(s,null);f(s,h),f(s,d),t[28](s),f(n,v),f(n,N),f(N,T),f(e,R),f(e,D),f(D,x),et.m(x,null),f(D,M);for(let t=0;t<rt.length;t+=1)rt[t].m(D,null);f(D,k),Q(O,D,null),f(D,L),f(D,U),$=!0,P||(V=[I(s,"click",t[16]),I(x,"click",t[4]),I(U,"click",t[31])],P=!0)},p(t,e){if((!$||64&e[0])&&G!==(G=pn(t[6])+"")&&A(i,G),(!$||8192&e[0])&&E(a,"width",t[13]),16384&e[0]){let n;for(W=t[14],n=0;n<W.length;n+=1){const r=An(t,W,n);Z[n]?Z[n].p(r,e):(Z[n]=Sn(r),Z[n].c(),Z[n].m(s,u))}for(;n<Z.length;n+=1)Z[n].d(1);Z.length=W.length}if(512&e[0]){let n;for(H=t[9],n=0;n<H.length;n+=1){const r=wn(t,H,n);X[n]?X[n].p(r,e):(X[n]=Nn(r),X[n].c(),X[n].m(s,h))}for(;n<X.length;n+=1)X[n].d(1);X.length=H.length}if((!$||8192&e[0])&&E(d,"left",t[13]),1024&e[0]&&S(s,"disabled","skipping"===t[10]),(!$||256&e[0])&&Y!==(Y=pn(t[8].totalTime)+"")&&A(T,Y),tt!==(tt=q(t))&&(et.d(1),(et=tt(t))&&(et.c(),et.m(x,null))),1066&e[0]){let n;for(nt=t[3],n=0;n<nt.length;n+=1){const r=In(t,nt,n);rt[n]?rt[n].p(r,e):(rt[n]=Dn(r),rt[n].c(),rt[n].m(D,k))}for(;n<rt.length;n+=1)rt[n].d(1);rt.length=nt.length}const n={};var r;1024&e[0]&&(n.disabled="skipping"===t[10]),!B&&1&e[0]&&(B=!0,n.checked=t[0],r=(()=>B=!1),F.push(r)),O.$set(n)},i(t){$||(j(O.$$.fragment,t),$=!0)},o(t){K(O.$$.fragment,t),$=!1},d(n){n&&g(e),t[27](null),m(Z,n),m(X,n),t[28](null),et.d(),m(rt,n),J(O),P=!1,c(V)}}}function Sn(t){let e,n;return{c(){w(e=y("div"),"title",n=t[45].name),E(e,"width",t[45].width),E(e,"height","4px"),E(e,"position","absolute"),E(e,"background",t[45].background),E(e,"left",t[45].position)},m(t,n){p(t,e,n)},p(t,r){16384&r[0]&&n!==(n=t[45].name)&&w(e,"title",n),16384&r[0]&&E(e,"width",t[45].width),16384&r[0]&&E(e,"background",t[45].background),16384&r[0]&&E(e,"left",t[45].position)},d(t){t&&g(e)}}}function Nn(t){let e,n;return{c(){w(e=y("div"),"title",n=t[42].name),E(e,"width","10px"),E(e,"height","5px"),E(e,"position","absolute"),E(e,"top","2px"),E(e,"transform","translate(-50%, -50%)"),E(e,"background",t[42].background),E(e,"left",t[42].position)},m(t,n){p(t,e,n)},p(t,r){512&r[0]&&n!==(n=t[42].name)&&w(e,"title",n),512&r[0]&&E(e,"background",t[42].background),512&r[0]&&E(e,"left",t[42].position)},d(t){t&&g(e)}}}function Tn(t){let e,n;return{c(){e=v("svg"),w(n=v("path"),"d","M170.65984 896l0-768 640 384zM644.66944\n              512l-388.66944-233.32864 0 466.65728z"),w(e,"class","icon"),w(e,"viewBox","0 0 1024 1024"),w(e,"version","1.1"),w(e,"xmlns","http://www.w3.org/2000/svg"),w(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),w(e,"width","16"),w(e,"height","16")},m(t,r){p(t,e,r),f(e,n)},d(t){t&&g(e)}}}function Rn(t){let e,n;return{c(){e=v("svg"),w(n=v("path"),"d","M682.65984 128q53.00224 0 90.50112 37.49888t37.49888 90.50112l0\n              512q0 53.00224-37.49888 90.50112t-90.50112\n              37.49888-90.50112-37.49888-37.49888-90.50112l0-512q0-53.00224\n              37.49888-90.50112t90.50112-37.49888zM341.34016 128q53.00224 0\n              90.50112 37.49888t37.49888 90.50112l0 512q0 53.00224-37.49888\n              90.50112t-90.50112\n              37.49888-90.50112-37.49888-37.49888-90.50112l0-512q0-53.00224\n              37.49888-90.50112t90.50112-37.49888zM341.34016 213.34016q-17.67424\n              0-30.16704 12.4928t-12.4928 30.16704l0 512q0 17.67424 12.4928\n              30.16704t30.16704 12.4928 30.16704-12.4928\n              12.4928-30.16704l0-512q0-17.67424-12.4928-30.16704t-30.16704-12.4928zM682.65984\n              213.34016q-17.67424 0-30.16704 12.4928t-12.4928 30.16704l0 512q0\n              17.67424 12.4928 30.16704t30.16704 12.4928 30.16704-12.4928\n              12.4928-30.16704l0-512q0-17.67424-12.4928-30.16704t-30.16704-12.4928z"),w(e,"class","icon"),w(e,"viewBox","0 0 1024 1024"),w(e,"version","1.1"),w(e,"xmlns","http://www.w3.org/2000/svg"),w(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),w(e,"width","16"),w(e,"height","16")},m(t,r){p(t,e,r),f(e,n)},d(t){t&&g(e)}}}function Dn(t){let e,n,r,i,o,s,a=t[39]+"";function l(){return t[29](t[39])}return{c(){e=y("button"),n=C(a),r=C("x"),e.disabled=i="skipping"===t[10],w(e,"class","svelte-19ke1iv"),S(e,"active",t[39]===t[1]&&"skipping"!==t[10])},m(t,i){p(t,e,i),f(e,n),f(e,r),o||(s=I(e,"click",l),o=!0)},p(r,o){t=r,8&o[0]&&a!==(a=t[39]+"")&&A(n,a),1024&o[0]&&i!==(i="skipping"===t[10])&&(e.disabled=i),1034&o[0]&&S(e,"active",t[39]===t[1]&&"skipping"!==t[10])},d(t){t&&g(e),o=!1,s()}}}function xn(t){let e,n,r=t[2]&&En(t);return{c(){r&&r.c(),e=C("")},m(t,i){r&&r.m(t,i),p(t,e,i),n=!0},p(t,n){t[2]?r?(r.p(t,n),4&n[0]&&j(r,1)):((r=En(t)).c(),j(r,1),r.m(e.parentNode,e)):r&&(W(),K(r,1,1,()=>{r=null}),Z())},i(t){n||(j(r),n=!0)},o(t){K(r),n=!1},d(t){r&&r.d(t),t&&g(e)}}}function Mn(t,e,n){return(100-(e-n)/(e-t)*100).toFixed(2)}function _n(t,e,n){const r=function(){const t=R();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=function(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}(e,n,{cancelable:r});return i.slice().forEach(e=>{e.call(t,o)}),!o.defaultPrevented}return!0}}();let i,o,s,a,l,c,u,h,d,f,{replayer:p}=e,{showController:g}=e,{autoPlay:m}=e,{skipInactive:y}=e,{speedOption:v}=e,{speed:C=(v.length?v[0]:1)}=e,{tags:b={}}=e,{inactiveColor:I}=e,w=0,A=null,E=!1,S=null;const N=()=>{A&&(cancelAnimationFrame(A),A=null)},T=()=>{"paused"===i&&(l?(p.play(),l=!1):p.play(w))},M=()=>{"playing"===i&&(p.pause(),E=!1)},k=(t,e)=>{n(6,w=t),E=!1,("boolean"==typeof e?e:"playing"===i)?p.play(t):p.pause(t)},F=(t,e,r=!1,i)=>{S=r?{start:t,end:e}:null,n(6,w=t),E=e,c=i,p.play(t)},O=t=>{let e="playing"===i;n(1,C=t),e&&p.pause(),p.setConfig({speed:C}),e&&p.play(w)};var B;return D(()=>{n(7,i=p.service.state.value),n(10,o=p.speedService.state.value),p.on("state-change",t=>{const{player:e,speed:r}=t;if((null==e?void 0:e.value)&&i!==e.value)switch(n(7,i=e.value),i){case"playing":N(),A=requestAnimationFrame(function t(){n(6,w=p.getCurrentTime()),E&&w>=E&&(S?F(S.start,S.end,!0,void 0):(p.pause(),c&&(c(),c=null))),w<u.totalTime&&(A=requestAnimationFrame(t))});break;case"paused":N()}(null==r?void 0:r.value)&&o!==r.value&&n(10,o=r.value)}),p.on("finish",()=>{l=!0,c&&(c(),c=null)}),m&&p.play()}),B=(()=>{y!==p.config.skipInactive&&p.setConfig({skipInactive:y})}),R().$$.after_update.push(B),x(()=>{p.pause(),N()}),t.$$set=(t=>{"replayer"in t&&n(17,p=t.replayer),"showController"in t&&n(2,g=t.showController),"autoPlay"in t&&n(18,m=t.autoPlay),"skipInactive"in t&&n(0,y=t.skipInactive),"speedOption"in t&&n(3,v=t.speedOption),"speed"in t&&n(1,C=t.speed),"tags"in t&&n(19,b=t.tags),"inactiveColor"in t&&n(20,I=t.inactiveColor)}),t.$$.update=(()=>{if(64&t.$$.dirty[0]&&r("ui-update-current-time",{payload:w}),128&t.$$.dirty[0]&&r("ui-update-player-state",{payload:i}),131072&t.$$.dirty[0]&&n(8,u=p.getMetaData()),320&t.$$.dirty[0]){const t=Math.min(1,w/u.totalTime);n(13,h=100*t+"%"),r("ui-update-progress",{payload:t})}655360&t.$$.dirty[0]&&n(9,d=(()=>{const{context:t}=p.service.state,e=t.events.length,n=t.events[0].timestamp,r=t.events[e-1].timestamp,i=[];return t.events.forEach(t=>{if(t.type===It.Custom){const e={name:t.data.tag,background:b[t.data.tag]||"rgb(73, 80, 246)",position:`${Mn(n,r,t.timestamp)}%`};i.push(e)}}),i})()),1179648&t.$$.dirty[0]&&n(14,f=(()=>{try{const{context:t}=p.service.state,e=t.events.length,n=t.events[0].timestamp,r=t.events[e-1].timestamp,i=function(t){const e=[];let n=t[0].timestamp;for(const r of t)yn(r)&&(r.timestamp-n>1e4&&e.push([n,r.timestamp]),n=r.timestamp);return e}(t.events),o=(t,e,n,r)=>((r-n)/(e-t)*100).toFixed(2);return i.map(t=>({name:"inactive period",background:I,position:`${Mn(n,r,t[0])}%`,width:`${o(n,r,t[0],t[1])}%`}))}catch(t){return[]}})())}),[y,C,g,v,()=>{switch(i){case"playing":M();break;case"paused":T()}},O,w,i,u,d,o,s,a,h,f,r,t=>{if("skipping"===o)return;const e=s.getBoundingClientRect();let n=(t.clientX-e.left)/e.width;n<0?n=0:n>1&&(n=1);const r=u.totalTime*n;l=!1,k(r)},p,m,b,I,T,M,k,F,()=>{n(0,y=!y)},()=>Promise.resolve().then(()=>{n(8,u=p.getMetaData())}),function(t){_[t?"unshift":"push"](()=>{n(12,a=t)})},function(t){_[t?"unshift":"push"](()=>{n(11,s=t)})},t=>O(t),function(t){n(0,y=t)},()=>r("fullscreen")]}class kn extends X{constructor(t){super(),H(this,t,_n,xn,h,{replayer:17,showController:2,autoPlay:18,skipInactive:0,speedOption:3,speed:1,tags:19,inactiveColor:20,toggle:4,play:21,pause:22,goto:23,playRange:24,setSpeed:5,toggleSkipInactive:25,triggerUpdateMeta:26},null,[-1,-1])}get toggle(){return this.$$.ctx[4]}get play(){return this.$$.ctx[21]}get pause(){return this.$$.ctx[22]}get goto(){return this.$$.ctx[23]}get playRange(){return this.$$.ctx[24]}get setSpeed(){return this.$$.ctx[5]}get toggleSkipInactive(){return this.$$.ctx[25]}get triggerUpdateMeta(){return this.$$.ctx[26]}}function Fn(t){let e,n,r={replayer:t[7],showController:t[3],autoPlay:t[1],speedOption:t[2],skipInactive:t[0],tags:t[4],inactiveColor:t[5]};return e=new kn({props:r}),t[32](e),e.$on("fullscreen",t[33]),{c(){z(e.$$.fragment)},m(t,r){Q(e,t,r),n=!0},p(t,n){const r={};128&n[0]&&(r.replayer=t[7]),8&n[0]&&(r.showController=t[3]),2&n[0]&&(r.autoPlay=t[1]),4&n[0]&&(r.speedOption=t[2]),1&n[0]&&(r.skipInactive=t[0]),16&n[0]&&(r.tags=t[4]),32&n[0]&&(r.inactiveColor=t[5]),e.$set(r)},i(t){n||(j(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(n){t[32](null),J(e,n)}}}function On(t){let e,n,r,i,o=t[7]&&Fn(t);return{c(){e=y("div"),n=y("div"),r=b(),o&&o.c(),w(n,"class","rr-player__frame"),w(n,"style",t[11]),w(e,"class","rr-player"),w(e,"style",t[12])},m(s,a){p(s,e,a),f(e,n),t[31](n),f(e,r),o&&o.m(e,null),t[34](e),i=!0},p(t,r){(!i||2048&r[0])&&w(n,"style",t[11]),t[7]?o?(o.p(t,r),128&r[0]&&j(o,1)):((o=Fn(t)).c(),j(o,1),o.m(e,null)):o&&(W(),K(o,1,1,()=>{o=null}),Z()),(!i||4096&r[0])&&w(e,"style",t[12])},i(t){i||(j(o),i=!0)},o(t){K(o),i=!1},d(n){n&&g(e),t[31](null),o&&o.d(),t[34](null)}}}function Bn(t,e,n){let r,i,o,a,l,c,u,{width:h=1024}=e,{height:f=576}=e,{maxScale:p=1}=e,{events:g=[]}=e,{skipInactive:m=!0}=e,{autoPlay:y=!0}=e,{speedOption:v=[1,2,4,8]}=e,{speed:C=1}=e,{showController:b=!0}=e,{tags:I={}}=e,{inactiveColor:w="#D4D4D4"}=e,A=h,E=f;const S=(t,e)=>{const n=[h/e.width,f/e.height];p&&n.push(p),t.style.transform=`scale(${Math.min(...n)})translate(-50%, -50%)`},N=()=>{var t;i&&(gn()?document.exitFullscreen?document.exitFullscreen():document.mozExitFullscreen?document.mozExitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():(t=i).requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen())};return D(()=>{if(void 0!==v&&"array"!==mn(v))throw new Error("speedOption must be array");if(v.forEach(t=>{if("number"!==mn(t))throw new Error("item of speedOption must be number")}),v.indexOf(C)<0)throw new Error(`speed must be one of speedOption,\n        current config:\n        {\n          ...\n          speed: ${C},\n          speedOption: [${v.toString()}]\n          ...\n        }\n        `);var t;n(7,r=new hn(g,Object.assign({speed:C,root:o,unpackFn:Oe},e))),r.on("resize",t=>{S(r.wrapper,t)}),t=(()=>{gn()?setTimeout(()=>{A=h,E=f,n(13,h=i.offsetWidth),n(14,f=i.offsetHeight-(b?80:0)),S(r.wrapper,{width:r.iframe.offsetWidth,height:r.iframe.offsetHeight})},0):(n(13,h=A),n(14,f=E),S(r.wrapper,{width:r.iframe.offsetWidth,height:r.iframe.offsetHeight}))}),document.addEventListener("fullscreenchange",t),document.addEventListener("webkitfullscreenchange",t),document.addEventListener("mozfullscreenchange",t),document.addEventListener("MSFullscreenChange",t),a=(()=>{document.removeEventListener("fullscreenchange",t),document.removeEventListener("webkitfullscreenchange",t),document.removeEventListener("mozfullscreenchange",t),document.removeEventListener("MSFullscreenChange",t)})}),x(()=>{a&&a()}),t.$$set=(t=>{n(39,e=s(s({},e),d(t))),"width"in t&&n(13,h=t.width),"height"in t&&n(14,f=t.height),"maxScale"in t&&n(15,p=t.maxScale),"events"in t&&n(16,g=t.events),"skipInactive"in t&&n(0,m=t.skipInactive),"autoPlay"in t&&n(1,y=t.autoPlay),"speedOption"in t&&n(2,v=t.speedOption),"speed"in t&&n(17,C=t.speed),"showController"in t&&n(3,b=t.showController),"tags"in t&&n(4,I=t.tags),"inactiveColor"in t&&n(5,w=t.inactiveColor)}),t.$$.update=(()=>{24576&t.$$.dirty[0]&&n(11,c=dn({width:`${h}px`,height:`${f}px`})),24584&t.$$.dirty[0]&&n(12,u=dn({width:`${h}px`,height:`${f+(b?80:0)}px`}))}),e=d(e),[m,y,v,b,I,w,N,r,i,o,l,c,u,h,f,p,g,C,()=>r.getMirror(),()=>{S(r.wrapper,{width:r.iframe.offsetWidth,height:r.iframe.offsetHeight})},(t,e)=>{switch(r.on(t,e),t){case"ui-update-current-time":case"ui-update-progress":case"ui-update-player-state":l.$on(t,({detail:t})=>e(t))}},t=>{r.addEvent(t),l.triggerUpdateMeta()},()=>r.getMetaData(),()=>r,()=>{l.toggle()},t=>{l.setSpeed(t)},()=>{l.toggleSkipInactive()},()=>{l.play()},()=>{l.pause()},(t,e)=>{l.goto(t,e)},(t,e,n=!1,r)=>{l.playRange(t,e,n,r)},function(t){_[t?"unshift":"push"](()=>{n(9,o=t)})},function(t){_[t?"unshift":"push"](()=>{n(10,l=t)})},()=>N(),function(t){_[t?"unshift":"push"](()=>{n(8,i=t)})}]}class Ln extends X{constructor(t){super(),H(this,t,Bn,On,h,{width:13,height:14,maxScale:15,events:16,skipInactive:0,autoPlay:1,speedOption:2,speed:17,showController:3,tags:4,inactiveColor:5,getMirror:18,triggerResize:19,toggleFullscreen:6,addEventListener:20,addEvent:21,getMetaData:22,getReplayer:23,toggle:24,setSpeed:25,toggleSkipInactive:26,play:27,pause:28,goto:29,playRange:30},null,[-1,-1])}get getMirror(){return this.$$.ctx[18]}get triggerResize(){return this.$$.ctx[19]}get toggleFullscreen(){return this.$$.ctx[6]}get addEventListener(){return this.$$.ctx[20]}get addEvent(){return this.$$.ctx[21]}get getMetaData(){return this.$$.ctx[22]}get getReplayer(){return this.$$.ctx[23]}get toggle(){return this.$$.ctx[24]}get setSpeed(){return this.$$.ctx[25]}get toggleSkipInactive(){return this.$$.ctx[26]}get play(){return this.$$.ctx[27]}get pause(){return this.$$.ctx[28]}get goto(){return this.$$.ctx[29]}get playRange(){return this.$$.ctx[30]}}class Un extends Ln{constructor(t){super({target:t.target,props:t.data||t.props})}}}).call(e,n("f1Eh")(t),n("EuP9").Buffer,n("W2nU"))},tEBz:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Dd8w"),i=n.n(r),o=n("BO1k"),s=n.n(o),a=n("woOf"),l=n.n(a),c=n("NYxO"),u=n("8Q2T"),h=n("FN8c"),d=n("oAV5"),f=n("2hfY"),p={name:"submissionList",components:{Pagination:n("26Oo").a},data:function(){var t=this;return{formFilter:{myself:!1,result:"",username:""},columns:[{title:this.$i18n.t("m.When"),align:"center",render:function(t,e){return t("span",f.a.utcToLocal(e.row.create_time))}},{title:this.$i18n.t("m.ID"),align:"center",render:function(e,n){return n.row.show_link?e("span",{style:{color:"#57a3f3",cursor:"pointer"},on:{click:function(){t.$router.push("/status/"+n.row.id)}}},n.row.id.slice(0,12)):e("span",n.row.id.slice(0,12))}},{title:this.$i18n.t("m.Status"),align:"center",render:function(e,n){return e("Tag",{props:{color:h.e[n.row.result].color}},t.$i18n.t("m."+h.e[n.row.result].name.replace(/ /g,"_")))}},{title:this.$i18n.t("m.Problem"),align:"center",render:function(e,n){return e("span",{style:{color:"#57a3f3",cursor:"pointer"},on:{click:function(){t.contestID?t.$router.push({name:"contest-problem-details",params:{problemID:n.row.problem,contestID:t.contestID}}):t.$router.push({name:"problem-details",params:{problemID:n.row.problem}})}}},n.row.problem)}},{title:this.$i18n.t("m.Time"),align:"center",render:function(t,e){return t("span",d.a.submissionTimeFormat(e.row.statistic_info.time_cost))}},{title:this.$i18n.t("m.Memory"),align:"center",render:function(t,e){return t("span",d.a.submissionMemoryFormat(e.row.statistic_info.memory_cost))}},{title:this.$i18n.t("m.Language"),align:"center",key:"language"},{title:this.$i18n.t("m.Author"),align:"center",render:function(e,n){return e("a",{style:{display:"inline-block","max-width":"150px"},on:{click:function(){t.$router.push({name:"user-home",query:{username:n.row.username}})}}},n.row.username)}}],loadingTable:!1,submissions:[],total:30,limit:12,page:1,contestID:"",problemID:"",routeName:"",JUDGE_STATUS:"",rejudge_column:!1}},mounted:function(){this.init(),this.JUDGE_STATUS=l()({},h.e),delete this.JUDGE_STATUS[9],delete this.JUDGE_STATUS[2]},methods:{init:function(){this.contestID=this.$route.params.contestID;var t=this.$route.query;this.problemID=t.problemID,this.formFilter.myself="1"===t.myself,this.formFilter.result=t.result||"",this.formFilter.username=t.username||"",this.page=parseInt(t.page)||1,this.page<1&&(this.page=1),this.routeName=this.$route.name,this.getSubmissions()},buildQuery:function(){return{myself:!0===this.formFilter.myself?"1":"0",result:this.formFilter.result,username:this.formFilter.username,page:this.page}},getSubmissions:function(){var t=this,e=this.buildQuery();e.contest_id=this.contestID,e.problem_id=this.problemID;var n=(this.page-1)*this.limit,r=this.contestID?"getContestSubmissionList":"getSubmissionList";this.loadingTable=!0,u.a[r](n,this.limit,e).then(function(e){var n=e.data.data,r=!0,i=!1,o=void 0;try{for(var a,l=s()(n.results);!(r=(a=l.next()).done);r=!0){a.value.loading=!1}}catch(t){i=!0,o=t}finally{try{!r&&l.return&&l.return()}finally{if(i)throw o}}t.adjustRejudgeColumn(),t.loadingTable=!1,t.submissions=n.results,t.total=n.total}).catch(function(){t.loadingTable=!1})},changeRoute:function(){var t=d.a.filterEmptyValue(this.buildQuery());t.contestID=this.contestID,t.problemID=this.problemID;var e=t.contestID?"contest-submission-list":"submission-list";this.$router.push({name:e,query:d.a.filterEmptyValue(t)})},goRoute:function(t){this.$router.push(t)},adjustRejudgeColumn:function(){var t=this;if(this.rejudgeColumnVisible&&!this.rejudge_column){var e={title:this.$i18n.t("m.Option"),fixed:"right",align:"center",width:90,render:function(e,n){return e("Button",{props:{type:"primary",size:"small",loading:n.row.loading},on:{click:function(){t.handleRejudge(n.row.id,n.index)}}},t.$i18n.t("m.Rejudge"))}};this.columns.push(e),this.rejudge_column=!0}},handleResultChange:function(t){this.page=1,this.formFilter.result=t,this.changeRoute()},handleQueryChange:function(){this.page=1,this.changeRoute()},handleRejudge:function(t,e){var n=this;this.submissions[e].loading=!0,u.a.submissionRejudge(t).then(function(t){n.submissions[e].loading=!1,n.$success("Succeeded"),n.getSubmissions()},function(){n.submissions[e].loading=!1})}},computed:i()({},Object(c.mapGetters)(["isAuthenticated","user"]),{title:function(){return this.contestID?this.problemID?this.$i18n.t("m.Problem_Submissions"):this.$i18n.t("m.Submissions"):this.$i18n.t("m.Status")},status:function(){return""===this.formFilter.result?this.$i18n.t("m.Status"):this.$i18n.t("m."+h.e[this.formFilter.result].name.replace(/ /g,"_"))},rejudgeColumnVisible:function(){return!this.contestID&&this.user.admin_type===h.i.SUPER_ADMIN}}),watch:{$route:function(t,e){t!==e&&this.init()},rejudgeColumnVisible:function(){this.adjustRejudgeColumn()},isAuthenticated:function(){this.init()}}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex-container"},[n("div",{attrs:{id:"main"}},[n("Panel",{attrs:{shadow:""}},[n("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.title))]),t._v(" "),n("div",{attrs:{slot:"extra"},slot:"extra"},[n("ul",{staticClass:"filter"},[n("li",[n("Dropdown",{on:{"on-click":t.handleResultChange}},[n("span",[t._v(t._s(t.status)+"\n                "),n("Icon",{attrs:{type:"arrow-down-b"}})],1),t._v(" "),n("Dropdown-menu",{attrs:{slot:"list"},slot:"list"},[n("Dropdown-item",{attrs:{name:""}},[t._v(t._s(t.$t("m.All")))]),t._v(" "),t._l(Object.keys(t.JUDGE_STATUS),function(e){return n("Dropdown-item",{key:e,attrs:{name:e}},[t._v("\n                  "+t._s(t.$t("m."+t.JUDGE_STATUS[e].name.replace(/ /g,"_")))+"\n                ")])})],2)],1)],1),t._v(" "),n("li",[n("i-switch",{attrs:{size:"large"},on:{"on-change":t.handleQueryChange},model:{value:t.formFilter.myself,callback:function(e){t.$set(t.formFilter,"myself",e)},expression:"formFilter.myself"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("m.Mine")))]),t._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("m.All")))])])],1),t._v(" "),n("li",[n("Input",{attrs:{placeholder:t.$t("m.Search_Author")},on:{"on-enter":t.handleQueryChange},model:{value:t.formFilter.username,callback:function(e){t.$set(t.formFilter,"username",e)},expression:"formFilter.username"}})],1),t._v(" "),n("li",[n("Button",{attrs:{type:"info",icon:"refresh"},on:{click:t.getSubmissions}},[t._v(t._s(t.$t("m.Refresh")))])],1)])]),t._v(" "),n("Table",{attrs:{stripe:"","disabled-hover":!0,columns:t.columns,data:t.submissions,loading:t.loadingTable}}),t._v(" "),n("Pagination",{attrs:{total:t.total,"page-size":t.limit,current:t.page},on:{"on-change":t.changeRoute,"update:current":function(e){t.page=e}}})],1)],1)])},staticRenderFns:[]};var m=n("VU/8")(p,g,!1,function(t){n("6A5e")},"data-v-5e851b3e",null);e.default=m.exports},ujcs:function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?i-1:0,d=n?-1:1,f=t[e+h];for(h+=d,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=256*o+t[e+h],h+=d,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+t[e+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=c}return(f?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,l,c=8*o-i-1,u=(1<<c)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(e*l-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+f]=255&s,f+=p,s/=256,c-=8);t[n+f-p]|=128*g}},zCmR:function(t,e){}});